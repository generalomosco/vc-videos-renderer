{"version":3,"file":"vc-videos-renderer.js","mappings":"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","sources":["webpack://vc-videos-renderer/webpack/universalModuleDefinition","webpack://vc-videos-renderer/./src/VcVideosRenderer.js","webpack://vc-videos-renderer/./src/core-extenstions/imageRenderer/ImageRenderer.js","webpack://vc-videos-renderer/./src/core-extenstions/imageRenderer/Img.js","webpack://vc-videos-renderer/./src/core-extenstions/textRenderer/Text.js","webpack://vc-videos-renderer/./src/core-extenstions/textRenderer/TextRenderer.js","webpack://vc-videos-renderer/./src/event-handle.js","webpack://vc-videos-renderer/./src/extension.js","webpack://vc-videos-renderer/./src/index.js","webpack://vc-videos-renderer/./src/logs/VCVRDEnum.js","webpack://vc-videos-renderer/./src/logs/VCVRDError.js","webpack://vc-videos-renderer/./src/utils/CaptureMediaStreamFromMediaElement.js","webpack://vc-videos-renderer/./src/utils/Common.js","webpack://vc-videos-renderer/./src/utils/CustomAnimationFrameRunner.js","webpack://vc-videos-renderer/./src/utils/GLHelpers.js","webpack://vc-videos-renderer/./src/vcVideosRendererCore.js","webpack://vc-videos-renderer/./asset/vc-videos-renderer/images/default-avatar.png","webpack://vc-videos-renderer/./asset/vc-videos-renderer/images/default-reconnecting-avatar.png","webpack://vc-videos-renderer/./asset/vc-videos-renderer/images/muted-mic.png","webpack://vc-videos-renderer/./src/shaders/rounded-rect-border-entry-point.frag","webpack://vc-videos-renderer/./node_modules/regenerator-runtime/runtime.js","webpack://vc-videos-renderer/webpack/bootstrap","webpack://vc-videos-renderer/webpack/runtime/define property getters","webpack://vc-videos-renderer/webpack/runtime/hasOwnProperty shorthand","webpack://vc-videos-renderer/webpack/runtime/make namespace object","webpack://vc-videos-renderer/webpack/runtime/publicPath","webpack://vc-videos-renderer/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","import VcVideosRendererCore from './vcVideosRendererCore';\r\nconst defaultOptions = {\r\n  debug: false,\r\n  frameRate: 30\r\n};\r\nclass VcVideosRenderer extends VcVideosRendererCore {\r\n  constructor(\r\n    canvas,\r\n    options,\r\n  ) {\r\n    options = Object.assign({}, defaultOptions, options);\r\n    super(canvas, options);\r\n  }\r\n  getMixedStream() {\r\n    return this._getMixedStream();\r\n  }\r\n  stopDrawing() {\r\n    return this._stopDrawing()\r\n  }\r\n  startDrawing() {\r\n    return this._startDrawing()\r\n  }\r\n  resetFrame(frameItems) {\r\n    return this._resetFrame(frameItems);\r\n  }\r\n  updateExistingItems(frameItems) {\r\n    return this._updateExistingItems(frameItems);\r\n  }\r\n  softUpdateVideoFrameItem(itemID, { objectFit,\r\n    renderVideo,\r\n    renderAudio,\r\n    cameraDisabled,\r\n    audioDisabled,\r\n    isWaiting,\r\n    isReconnecting,\r\n    backgroundColor,\r\n    borderColor,\r\n    innerBorderColor }) {\r\n    return this._softUpdateVideoFrameItem(itemID, {\r\n      objectFit,\r\n      renderVideo,\r\n      renderAudio,\r\n      cameraDisabled,\r\n      audioDisabled,\r\n      isWaiting,\r\n      isReconnecting,\r\n      backgroundColor,\r\n      borderColor,\r\n      innerBorderColor\r\n    });\r\n  }\r\n  destroy() {\r\n    this._destroy();\r\n  }\r\n}\r\nexport default VcVideosRenderer;","import Extension from '../../extension';\nimport Img from './Img';\nclass ImageRenderer extends Extension {\n  constructor(\n    app,\n  ) {\n    super(app);\n  }\n  NewImageFromTextures(textures, style, onReadyCb) {\n    return new Img(this, \"texture\", textures, style, onReadyCb);\n  }\n  NewImageFromURLs(URLs, style, onReadyCb) {\n    return new Img(this, \"url\", URLs, style, onReadyCb);\n  }\n}\nexport default ImageRenderer;","import {\r\n    createBuffer,\r\n    setBufferData,\r\n    calculateVerticesPosition,\r\n} from '../../utils/GLHelpers';\r\nconst defaultStyle = {\r\n    //width: 500,\r\n    //height: 300,\r\n    x: 0,\r\n    y: 0,\r\n    objectFit: \"contain\",\r\n    borderRadius: 0,\r\n    backgroundColor: [0, 0, 0, 0],\r\n    borderColor: [0, 0, 0, 0],\r\n    borderWidth: 0,\r\n    borderSoftness: 1,\r\n    innerBorder: {\r\n        borderColor: [0, 0, 0, 0],\r\n        borderWidth: 0,\r\n    },\r\n    gif: {\r\n        isGif: false,\r\n        frameRate: 30,\r\n    }\r\n};\r\n\r\nexport default class Img {\r\n    constructor(\r\n        imageRenderer,\r\n        sourceType, sources,\r\n        style,\r\n        onReadyCb\r\n    ) {\r\n        this.imageRenderer = imageRenderer;\r\n        this.sourceType = sourceType;\r\n        this.sources = sources;\r\n        this.style = Object.assign({}, defaultStyle, style);\r\n        this.style.innerBorder = Object.assign({}, defaultStyle.innerBorder, style.innerBorder ?? {});\r\n        this.style.gif = Object.assign({}, defaultStyle.gif, style.gif ?? {});\r\n\r\n        this.gifState = {\r\n            groups: {}\r\n        }\r\n\r\n        this.texturesObj = {\r\n            toRenderID: null,\r\n            textures: []\r\n        };\r\n        this._isReady = false;\r\n        this._onReadyCb = onReadyCb;\r\n        this._setupTexture();\r\n    }\r\n    _setupTexture() {\r\n        if (this.sourceType === \"texture\") {\r\n            this._setupRendering(this.sources);\r\n        } else if (this.sourceType === \"url\") {\r\n            this._loadTexturesFromURLs(this.sources)\r\n                .then(textures => {\r\n                    this._setupRendering(textures);\r\n                })\r\n                .catch(err => {\r\n                    if (err.source && err.source.URL) {\r\n                        this.imageRenderer.app.console.error(`Error loading image from URL \"${err.source.URL}\"`, err.error);\r\n                    } else {\r\n                        this.imageRenderer.app.console.error(err);\r\n                    }\r\n                });\r\n        } else {\r\n            this.imageRenderer.app.console.error(`Invalid image source type \"${this.sourceType}\"!`);\r\n        }\r\n    }\r\n    _loadTexturesFromURLs(urls_sources) {\r\n        return new Promise((resolve, reject) => {\r\n            const promises = [];\r\n            for (const i in urls_sources) {\r\n                const source = urls_sources[i];\r\n                if (this.style.gif.isGif) {\r\n                    source.gifIndex = Number(i);\r\n                }\r\n                promises.push(new Promise((resolveEach, rejectEach) => {\r\n\r\n                    this.imageRenderer.app.loadTextureAsset({\r\n                        URL: source.URL,\r\n                        cacheID: source.cacheID\r\n                    },\r\n                        (texture, err) => {\r\n                            if (err) {\r\n                                return rejectEach({\r\n                                    source,\r\n                                    error: err\r\n                                });\r\n                            }\r\n                            resolveEach({ source, texture });\r\n                        });\r\n\r\n                }));\r\n            }\r\n            if (!promises.length) {\r\n                return reject(\"Empty image source!\")\r\n            }\r\n            Promise.all(promises).then(resolves => {\r\n                const textures = [];\r\n                for (const r of resolves) {\r\n                    const rItem = { id: r.source.id, texture: r.texture };\r\n                    if (r.source.hasOwnProperty(\"gifIndex\")) {\r\n                        rItem.gifIndex = r.source.gifIndex;\r\n                    }\r\n                    textures.push(rItem)\r\n                }\r\n                resolve(textures);\r\n            }).catch(er => {\r\n                reject(er);\r\n            });\r\n        });\r\n    }\r\n    _setupRendering(textures) {\r\n        const finalTextures = [];\r\n        for (const i in textures) {\r\n            const texItem = textures[i];\r\n            if (!texItem.texture || ![\"image\"].includes(texItem.texture.type) || !texItem.texture.image) {\r\n                this.imageRenderer.app.console.error(\"Invalid texture!\");\r\n                return;\r\n            }\r\n            if (!texItem.id && texItem.id !== 0) {\r\n                texItem.id = \"-auto-gen-texture-id--\" + this.imageRenderer.app.generateIncreamentID();\r\n            }\r\n            if (this.style.gif.isGif) {\r\n                if (!texItem.gifIndex && texItem.gifIndex !== 0) {\r\n                    texItem.gifIndex = Number(i);\r\n                }\r\n            }\r\n            finalTextures.push(texItem);\r\n        }\r\n        if (this.style.gif.isGif) {\r\n            finalTextures.sort(function (a, b) {\r\n                return a.gifIndex - b.gifIndex;\r\n            });\r\n        }\r\n        let toRenderID = null;\r\n        if (finalTextures.length === 1) {\r\n            toRenderID = finalTextures[0].id;\r\n        }\r\n        this.texturesObj = {\r\n            toRenderID: toRenderID,\r\n            textures: finalTextures\r\n        };\r\n        this._isReady = true;\r\n        if(this._onReadyCb){\r\n            this._onReadyCb();\r\n            this._onReadyCb = null;\r\n        }\r\n    }\r\n    isItReady(){\r\n        return this._isReady;\r\n    }\r\n    update({ width, height, x, y, borderWidth, borderRadius, borderSoftness, toRenderID } = {}) {\r\n        if (width !== undefined) {\r\n            this.style.width = width;\r\n        }\r\n        if (height !== undefined) {\r\n            this.style.height = height;\r\n        }\r\n        if (x !== undefined) {\r\n            this.style.x = x;\r\n        }\r\n        if (y !== undefined) {\r\n            this.style.y = y;\r\n        }\r\n        if (borderWidth !== undefined) {\r\n            this.style.borderWidth = borderWidth;\r\n        }\r\n        if (borderRadius !== undefined) {\r\n            this.style.borderRadius = borderRadius;\r\n        }\r\n        if (borderSoftness !== undefined) {\r\n            this.style.borderSoftness = borderSoftness;\r\n        }\r\n        if (toRenderID !== undefined) {\r\n            this.texturesObj.toRenderID = toRenderID;\r\n        }\r\n    }\r\n    render({ gifGroupName, gifSessionKey, gifRandomizeInitialization = false } = {}) {\r\n        const texturesLength = this.texturesObj.textures.length;\r\n        if (!texturesLength) return;\r\n\r\n        if (this.style.gif.isGif) {\r\n            if (!gifGroupName && gifGroupName !== 0) {\r\n                gifGroupName = \"default\";\r\n            }\r\n            let groupState = this.gifState.groups[gifGroupName];\r\n            if (!groupState) {\r\n                groupState = {\r\n                    startTime: window.performance.now(),\r\n                    nextRenderIndex: 0,\r\n                    gifSessionKey: null,\r\n                }\r\n                this.gifState.groups[gifGroupName] = groupState;\r\n            }\r\n            if (groupState.gifSessionKey !== gifSessionKey) {\r\n                groupState.gifSessionKey = gifSessionKey;\r\n                if (gifRandomizeInitialization) {\r\n                    groupState.nextRenderIndex = Img.generateRandomInt(0, texturesLength - 1);\r\n                }else{\r\n                    groupState.nextRenderIndex = 0;\r\n                }\r\n            }\r\n            const now = window.performance.now();\r\n            const elapsedTime = now - groupState.startTime;\r\n            const timePerFrame = 1000 / this.style.gif.frameRate;\r\n            const framesToAdvance = Math.floor(elapsedTime / timePerFrame);\r\n            groupState.nextRenderIndex = (groupState.nextRenderIndex + framesToAdvance) % texturesLength;\r\n            this._render(groupState.nextRenderIndex);\r\n            groupState.startTime += framesToAdvance * timePerFrame;\r\n        } else {\r\n            for (const i in this.texturesObj.textures) {\r\n                const textureItem = this.texturesObj.textures[i]\r\n                if (textureItem.id !== this.texturesObj.toRenderID) continue;\r\n                this._render(i);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    _render(textureIndex) {\r\n        const textureItem = this.texturesObj.textures[textureIndex];\r\n        if (!textureItem) {\r\n            return;\r\n        }\r\n        const app = this.imageRenderer.app;\r\n        if (this.style.borderWidth || this.style.backgroundColor[3] !== 0) {\r\n            app.drawRectBackgroundsAndBorders({\r\n                width: this.style.width, height: this.style.height, x: this.style.x, y: this.style.y,\r\n                borderWidth: this.style.borderWidth,\r\n                borderColor: this.style.borderColor,\r\n                backgroundColor: this.style.backgroundColor,\r\n                borderRadius: this.style.borderRadius,\r\n                borderSoftness: this.style.borderSoftness\r\n            }, false);\r\n        }\r\n\r\n        const image = textureItem.texture.image;\r\n        const imageTexture = textureItem.texture.texture;\r\n        app.gl.useProgram(app.shaders.kinds.image.program);\r\n\r\n        app.gl.bindTexture(app.gl.TEXTURE_2D, imageTexture);\r\n        app.gl.pixelStorei(app.gl.UNPACK_FLIP_Y_WEBGL, 1);\r\n        app.gl.texImage2D(app.gl.TEXTURE_2D, 0, app.gl.RGBA, app.gl.RGBA, app.gl.UNSIGNED_BYTE, image);\r\n\r\n        const positionBuffer = createBuffer(\r\n            app.gl,\r\n            calculateVerticesPosition(app.canvas, {\r\n                x: this.style.x,\r\n                y: this.style.y,\r\n                objectFit: this.style.objectFit,\r\n                width: this.style.width,\r\n                height: this.style.height,\r\n                borderWidth: this.style.borderWidth,\r\n                imageWidth: image.width,\r\n                imageHeight: image.height\r\n            }),\r\n            app.gl.ARRAY_BUFFER);\r\n\r\n        setBufferData(app.gl, app.shaders.kinds.image.attributes.rectVertexPosition, positionBuffer);\r\n\r\n        app.gl.uniform2fv(app.shaders.kinds.image.uniforms.u_resolution, [app.canvas.width, app.canvas.height]);\r\n\r\n        if (this.style.borderWidth || this.style.innerBorder.borderWidth) {\r\n            let newLeft = this.style.x;\r\n            let newTop = this.style.y;\r\n            let newWidth = this.style.width;\r\n            let newHeight = this.style.height;\r\n            let newBorderRadius = this.style.borderRadius;\r\n            let borderSoftnessBoundary = 0;\r\n            if (newBorderRadius) {\r\n                newBorderRadius += 2;//u_edgeSoftness\r\n            }\r\n            if (newBorderRadius && !this.style.borderWidth && this.style.innerBorder.borderWidth) {\r\n                const uEdgeSoftnessNoise = 2;\r\n                newWidth -= uEdgeSoftnessNoise;\r\n                newHeight -= uEdgeSoftnessNoise;\r\n                newLeft += uEdgeSoftnessNoise / 2;\r\n                newTop += uEdgeSoftnessNoise / 2;\r\n                newBorderRadius -= uEdgeSoftnessNoise;\r\n            }\r\n            if (this.style.borderWidth) {\r\n                if (this.style.borderSoftness) {\r\n                    borderSoftnessBoundary = (this.style.borderSoftness / 2);\r\n                    newWidth -= borderSoftnessBoundary;\r\n                    newHeight -= borderSoftnessBoundary;\r\n                    newLeft += borderSoftnessBoundary / 2;\r\n                    newTop += borderSoftnessBoundary / 2;\r\n                }\r\n                newLeft += this.style.borderWidth;\r\n                newTop += this.style.borderWidth;\r\n                newWidth -= this.style.borderWidth * 2;\r\n                newHeight -= this.style.borderWidth * 2;\r\n                if (newBorderRadius) {\r\n                    newBorderRadius -= this.style.borderWidth;\r\n                }\r\n            }\r\n            app.gl.uniform2fv(app.shaders.kinds.image.uniforms.rect_u_size, [newWidth, newHeight]);\r\n            app.gl.uniform2fv(app.shaders.kinds.image.uniforms.rect_u_location, [newLeft, newTop]);\r\n            app.gl.uniform1f(app.shaders.kinds.image.uniforms.rect_u_borderWidth, 0);\r\n            app.gl.uniform1f(app.shaders.kinds.image.uniforms.rect_u_borderSoftness, 0);\r\n            app.gl.uniform4fv(app.shaders.kinds.image.uniforms.rect_u_borderColor, [0.0, 0.0, 0.0, 0.0]);\r\n            app.gl.uniform4fv(app.shaders.kinds.image.uniforms.rect_u_borderRadius, [newBorderRadius, newBorderRadius, newBorderRadius, newBorderRadius]);\r\n        } else {\r\n            app.gl.uniform2fv(app.shaders.kinds.image.uniforms.rect_u_size, [this.style.width, this.style.height]);\r\n            app.gl.uniform2fv(app.shaders.kinds.image.uniforms.rect_u_location, [this.style.x, this.style.y]);\r\n            app.gl.uniform1f(app.shaders.kinds.image.uniforms.rect_u_borderWidth, 0);\r\n            app.gl.uniform1f(app.shaders.kinds.image.uniforms.rect_u_borderSoftness, this.style.borderSoftness);\r\n            app.gl.uniform4fv(app.shaders.kinds.image.uniforms.rect_u_borderColor, [0.0, 0.0, 0.0, 0.0]);\r\n            app.gl.uniform4fv(app.shaders.kinds.image.uniforms.rect_u_borderRadius, [this.style.borderRadius, this.style.borderRadius, this.style.borderRadius, this.style.borderRadius]);\r\n        }\r\n        app.gl.drawArrays(app.gl.TRIANGLE_STRIP, 0, 4);\r\n\r\n        if (this.style.innerBorder.borderWidth && this.style.innerBorder.borderColor) {\r\n            app.drawRectBackgroundsAndBorders({\r\n                width: this.style.width, height: this.style.height, x: this.style.x, y: this.style.y,\r\n                parentBorderWidth: this.style.borderWidth,\r\n                borderWidth: this.style.innerBorder.borderWidth,\r\n                borderColor: this.style.innerBorder.borderColor,\r\n                backgroundColor: [0.0, 0.0, 0.0, 0.0],\r\n                borderRadius: this.style.borderRadius,\r\n                borderSoftness: this.style.borderSoftness\r\n            }, true);\r\n        }\r\n    }\r\n    destroy(unlinkCache = false) {\r\n        if(unlinkCache){\r\n            for(const textureObj of this.texturesObj.textures){\r\n                this.imageRenderer.app.unlinkTextureCache(textureObj.texture);\r\n            }\r\n        }\r\n    }\r\n    static generateRandomInt(min, max) {\r\n        return Math.floor(Math.random() * (max - min + 1)) + min;\r\n    }\r\n\r\n}","const defaultTextStyle = {\r\n    //maxWidth: 200,\r\n    //maxLine: 3,\r\n    hyphenateWord: true,\r\n    compactText: false,\r\n    fontSize: 12,\r\n    lineHeight: 4,\r\n    fontWeight: \"normal\",\r\n    textColor: [1, 0, 0, 1],\r\n    backgroundColor: [0, 1, 0, 1],\r\n    borderRadius: [0, 0, 0, 0],\r\n    padding: [5, 5],\r\n    xDirection: \"left\",\r\n    yDirection: \"top\",\r\n    x: 10,\r\n    y: 10,\r\n    icon: {\r\n        iconURL: null,\r\n        iconCacheID: null,\r\n        width: 10,\r\n        height: 10,\r\n        placeIcon: \"left\",\r\n        fromTextToIconPadding: 10,\r\n    },\r\n    floatingText: {\r\n        float: false,\r\n        speed: 20\r\n    },\r\n};\r\n\r\nexport default class Text {\r\n    constructor(\r\n        textRenderer,\r\n        text,\r\n        textStyle,\r\n        willUpdateStyleAfterGettingSizeCb\r\n    ) {\r\n        this.textRenderer = textRenderer;\r\n        this.text = text;\r\n        this.textStyle = Object.assign({}, defaultTextStyle, textStyle);\r\n        this.textStyle.icon = Object.assign({}, defaultTextStyle.icon, textStyle.icon ?? {});\r\n        this.textStyle.floatingText = Object.assign({}, defaultTextStyle.floatingText, textStyle.floatingText ?? {});\r\n        this.TheImageRenderer = null;\r\n        this.iconTexture = null;\r\n        this._isReady = false;\r\n        this.floatableItems = null;\r\n        this.nonFloatableTextProp = null;\r\n        this._createTextTexture(willUpdateStyleAfterGettingSizeCb);\r\n    }\r\n    _createTextTexture(willUpdateStyleAfterGettingSizeCb) {\r\n        if (this.textStyle.icon.iconURL) {\r\n            this.textRenderer.app.loadTextureAsset({\r\n                URL: this.textStyle.icon.iconURL,\r\n                cacheID: this.textStyle.icon.iconCacheID\r\n            },\r\n                (texture, err) => {\r\n                    if (err) {\r\n                        this.textRenderer.app.console.error(`Error loading image from URL \"${this.textStyle.icon.iconURL}\"`, err);\r\n                        this._createText(null, willUpdateStyleAfterGettingSizeCb);\r\n                        return;\r\n                    }\r\n                    this._createText(texture.image, willUpdateStyleAfterGettingSizeCb);\r\n                });\r\n        } else {\r\n            this._createText(null, willUpdateStyleAfterGettingSizeCb);\r\n        }\r\n    }\r\n    _createText(iconImage, willUpdateStyleAfterGettingSizeCb) {\r\n        const context = document.createElement(\"canvas\").getContext(\"2d\");\r\n        context.canvas.width = 1;\r\n        context.canvas.height = 1;\r\n\r\n        if (this.textStyle.floatingText.float) {\r\n            this.floatableItems = {\r\n                frame: {\r\n                    width: this.textRenderer.app.canvas.width,\r\n                    height: this.textRenderer.app.canvas.height,\r\n                },\r\n                height: 0,\r\n                items: []\r\n            }\r\n            this.textStyle.hyphenateWord = false;\r\n            this.textStyle.compactText = true;\r\n            this.textStyle.maxLine = null;\r\n            this.textStyle.icon.iconURL = null;\r\n        }\r\n\r\n        const applyCanvasTextWriteAtrritubes = (ctx) => {\r\n            ctx.fillStyle = Text.normalizeRGB_RGBA_Array_To_255_String(this.textStyle.textColor);\r\n            ctx.font = `${this.textStyle.fontWeight} ${this.textStyle.fontSize}px Arial`;\r\n            ctx.textAlign = 'left';\r\n            ctx.textBaseline = 'top';\r\n        }\r\n\r\n        applyCanvasTextWriteAtrritubes(context);\r\n\r\n\r\n        let textMaxWidth = this.textStyle.maxWidth - (this.textStyle.padding[1] * 2);\r\n        if (this.textStyle.icon.iconURL) {\r\n            textMaxWidth -= this.textStyle.icon.width + this.textStyle.icon.fromTextToIconPadding;\r\n        }\r\n\r\n        const calculatedText = Text.calculateTextViewInCanvas(\r\n            context,\r\n            this.text,\r\n            0,\r\n            0,\r\n            {\r\n                maxWidth: textMaxWidth,\r\n                maxLine: this.textStyle.maxLine,\r\n                lineHeight: this.textStyle.lineHeight,\r\n                compactText: this.textStyle.compactText,\r\n                hyphenateWord: this.textStyle.hyphenateWord\r\n            }\r\n        );\r\n\r\n        if (this.textStyle.floatingText.float) {\r\n            calculatedText.width = calculatedText.highest_line_width;\r\n            calculatedText.height = calculatedText.highest_line_height;\r\n        }\r\n\r\n\r\n        let textWriteStartX = this.textStyle.padding[1];\r\n        let textWriteStartY = this.textStyle.padding[0];\r\n\r\n        let placeIconX = this.textStyle.padding[1];\r\n        let placeIconY = this.textStyle.padding[0];\r\n\r\n        if (this.textStyle.icon.iconURL) {\r\n            context.canvas.width = calculatedText.width + (this.textStyle.padding[1] * 2) + this.textStyle.icon.width + this.textStyle.icon.fromTextToIconPadding;\r\n\r\n            let heightToUse = null;\r\n            if (calculatedText.height > this.textStyle.icon.height) {\r\n                heightToUse = calculatedText.height;\r\n                placeIconY += (calculatedText.height - this.textStyle.icon.height) / 2;\r\n            } else {\r\n                heightToUse = this.textStyle.icon.height;\r\n                textWriteStartY += (this.textStyle.icon.height - calculatedText.height) / 2;\r\n            }\r\n\r\n            context.canvas.height = heightToUse + (this.textStyle.padding[0] * 2);\r\n            if (this.textStyle.icon.placeIcon === \"right\") {\r\n                placeIconX += calculatedText.width + this.textStyle.icon.fromTextToIconPadding;\r\n            } else {\r\n                //place icon left\r\n                textWriteStartX += this.textStyle.icon.width + this.textStyle.icon.fromTextToIconPadding;\r\n            }\r\n        } else {\r\n            context.canvas.width = calculatedText.width + (this.textStyle.padding[1] * 2);\r\n            context.canvas.height = calculatedText.height + (this.textStyle.padding[0] * 2);\r\n        }\r\n\r\n        if (willUpdateStyleAfterGettingSizeCb) {\r\n            willUpdateStyleAfterGettingSizeCb({\r\n                width: context.canvas.width,\r\n                height: context.canvas.height,\r\n                textStyle: this.textStyle,\r\n            });\r\n        }\r\n\r\n\r\n        const applyCanvasBackgroundAtrritubes = (ctx) => {\r\n            ctx.beginPath();\r\n            ctx.roundRect(0, 0, ctx.canvas.width, ctx.canvas.height, this.textStyle.borderRadius);\r\n            ctx.fillStyle = Text.normalizeRGB_RGBA_Array_To_255_String(this.textStyle.backgroundColor);\r\n            ctx.fill();\r\n        }\r\n        applyCanvasBackgroundAtrritubes(context);\r\n\r\n        if (iconImage) {\r\n            context.drawImage(iconImage, placeIconX, placeIconY, this.textStyle.icon.width, this.textStyle.icon.height);\r\n        }\r\n\r\n        applyCanvasTextWriteAtrritubes(context);\r\n\r\n        let lineItem = calculatedText.lines.shift();\r\n        let itemID = -1;\r\n        let floatableItems = {\r\n            firstItem: null,\r\n            items: []\r\n        };\r\n\r\n        if (this.textStyle.floatingText.float) {\r\n            //Start float\r\n            const subCtx = document.createElement(\"canvas\").getContext(\"2d\");\r\n            subCtx.canvas.width = this.floatableItems.frame.width;\r\n            subCtx.canvas.height = context.canvas.height;\r\n            applyCanvasBackgroundAtrritubes(subCtx);\r\n            floatableItems.items.push({\r\n                id: itemID,\r\n                canvas: subCtx.canvas,\r\n            });\r\n            this.floatableItems.items.push({\r\n                id: itemID,\r\n                width: subCtx.canvas.width,\r\n                height: subCtx.canvas.height\r\n            });\r\n        }\r\n        while (lineItem !== undefined) {\r\n            itemID++;\r\n            if (this.textStyle.floatingText.float) {\r\n                if (itemID === 0) {\r\n                    this.floatableItems.height = context.canvas.height;\r\n                    floatableItems.firstItem = lineItem;\r\n                    floatableItems.items.push({\r\n                        id: itemID,\r\n                        canvas: context.canvas,\r\n                    });\r\n                    this.floatableItems.items.push({\r\n                        id: itemID,\r\n                        width: context.canvas.width,\r\n                        height: context.canvas.height\r\n                    });\r\n                    context.fillText(lineItem.line, lineItem.x + textWriteStartX, lineItem.y + textWriteStartY);\r\n                } else {\r\n                    const subCtx = document.createElement(\"canvas\").getContext(\"2d\");\r\n                    subCtx.canvas.width = lineItem.width;\r\n                    subCtx.canvas.height = context.canvas.height;\r\n                    applyCanvasBackgroundAtrritubes(subCtx);\r\n                    applyCanvasTextWriteAtrritubes(subCtx);\r\n                    subCtx.fillText(lineItem.line, 0, floatableItems.firstItem.y + textWriteStartY);\r\n                    floatableItems.items.push({\r\n                        id: itemID,\r\n                        canvas: subCtx.canvas,\r\n                    });\r\n                    this.floatableItems.items.push({\r\n                        id: itemID,\r\n                        width: subCtx.canvas.width,\r\n                        height: subCtx.canvas.height\r\n                    });\r\n                }\r\n            } else {\r\n                context.fillText(lineItem.line, lineItem.x + textWriteStartX, lineItem.y + textWriteStartY);\r\n            }\r\n            lineItem = calculatedText.lines.shift();\r\n        }\r\n        if (floatableItems.items.length > 1) {\r\n            //To end float.\r\n            itemID++;\r\n            const subCtx = document.createElement(\"canvas\").getContext(\"2d\");\r\n            subCtx.canvas.width = this.floatableItems.frame.width;\r\n            subCtx.canvas.height = context.canvas.height;\r\n            applyCanvasBackgroundAtrritubes(subCtx);\r\n            floatableItems.items.push({\r\n                id: itemID,\r\n                canvas: subCtx.canvas,\r\n            });\r\n            this.floatableItems.items.push({\r\n                id: itemID,\r\n                width: subCtx.canvas.width,\r\n                height: subCtx.canvas.height\r\n            });\r\n        }\r\n        if (this.textStyle.floatingText.float) {\r\n\r\n            this._loadURLsFromCanvases(floatableItems.items)\r\n                .then(url_sources => {\r\n\r\n                    let newAxisX = this.textStyle.x;\r\n                    if (this.textStyle.xDirection === \"right\") {\r\n                        newAxisX -= context.canvas.width;\r\n                    }\r\n                    let newAxisY = this.textStyle.y;\r\n                    if (this.textStyle.yDirection === \"bottom\") {\r\n                        newAxisY -= context.canvas.height;\r\n                    }\r\n                    this.TheImageRenderer = this.textRenderer.app.ImageRenderer.NewImageFromURLs(url_sources, {\r\n                        width: context.canvas.width,\r\n                        height: context.canvas.height,\r\n                        x: newAxisX,\r\n                        y: newAxisY\r\n                    }, () => {\r\n                        this._isReady = true;\r\n                    });\r\n                })\r\n                .catch(err => {\r\n                    this.textRenderer.app.console.error(`Failed to create text `, err);\r\n                });\r\n\r\n        } else {\r\n            this.nonFloatableTextProp = {\r\n                width: context.canvas.width,\r\n                height: context.canvas.height\r\n            }\r\n            //I think it is faster to render static Image than canvas directly into webgl. \r\n            Text.canvasToStringUrl(context.canvas).then(imgUrl => {\r\n                this.textRenderer.app.loadTextureAsset({ URL: imgUrl }, (texture, err) => {\r\n                    if (err) {\r\n                        throw err;\r\n                    }\r\n                    let newAxisX = this.textStyle.x;\r\n                    if (this.textStyle.xDirection === \"right\") {\r\n                        newAxisX -= context.canvas.width;\r\n                    }\r\n                    let newAxisY = this.textStyle.y;\r\n                    if (this.textStyle.yDirection === \"bottom\") {\r\n                        newAxisY -= context.canvas.height;\r\n                    }\r\n                    this.TheImageRenderer = this.textRenderer.app.ImageRenderer.NewImageFromTextures([{ id: 1, texture }], {\r\n                        width: context.canvas.width,\r\n                        height: context.canvas.height,\r\n                        x: newAxisX,\r\n                        y: newAxisY\r\n                    }, () => {\r\n                        this._isReady = true;\r\n                    });\r\n                });\r\n            }).catch(er => {\r\n                this.textRenderer.app.console.error(er);\r\n            });\r\n        }\r\n    }\r\n    _loadURLsFromCanvases(items) {\r\n        return new Promise((resolve, reject) => {\r\n            const promises = [];\r\n            for (const i in items) {\r\n                const item = items[i];\r\n                promises.push(new Promise((resolveEach, rejectEach) => {\r\n                    Text.canvasToStringUrl(item.canvas).then(imgUrl => {\r\n                        resolveEach({ item, URL: imgUrl });\r\n                    }).catch(er => {\r\n                        rejectEach({\r\n                            item,\r\n                            error: er\r\n                        });\r\n                    })\r\n                }));\r\n            }\r\n            if (!promises.length) {\r\n                return reject(\"Empty text canvas!\")\r\n            }\r\n            Promise.all(promises).then(resolves => {\r\n                const URLs = [];\r\n                for (const r of resolves) {\r\n                    const rItem = { id: r.item.id, URL: r.URL };\r\n                    URLs.push(rItem)\r\n                }\r\n                resolve(URLs);\r\n            }).catch(er => {\r\n                reject(er);\r\n            });\r\n        });\r\n    }\r\n    _updateNonFloatableTextXY() {\r\n        if (this.textStyle.floatingText.float || !this.nonFloatableTextProp || !this.TheImageRenderer) return;\r\n        let newAxisX = this.textStyle.x;\r\n        if (this.textStyle.xDirection === \"right\") {\r\n            newAxisX -= this.nonFloatableTextProp.width;\r\n        }\r\n        let newAxisY = this.textStyle.y;\r\n        if (this.textStyle.yDirection === \"bottom\") {\r\n            newAxisY -= this.nonFloatableTextProp.height;\r\n        }\r\n        this.TheImageRenderer.update({\r\n            x: newAxisX,\r\n            y: newAxisY\r\n        });\r\n    }\r\n    update({ x, y } = {}) {\r\n        if (!this.textStyle.floatingText.float) {\r\n            if (x !== undefined) {\r\n                this.textStyle.x = x;\r\n            }\r\n            if (y !== undefined) {\r\n                this.textStyle.y = y;\r\n            }\r\n            if (x !== undefined || y !== undefined) {\r\n                this._updateNonFloatableTextXY();\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        if (!this.TheImageRenderer) return;\r\n        if (this.textStyle.floatingText.float) {\r\n            if (!this._isReady) return;\r\n\r\n            if (!this.floatableItems._state) {\r\n                this.floatableItems._state = {\r\n                    total_width: 0,\r\n                    moving_x: -(this.floatableItems.frame.width - 100),\r\n                    speedMoveStep: null,\r\n                    appFrameRate: this.textRenderer.app.frameRate\r\n                }\r\n                for (const item of this.floatableItems.items) {\r\n                    this.floatableItems._state.total_width += item.width;\r\n                }\r\n            }\r\n            const state = this.floatableItems._state;\r\n\r\n            let newAxisY = this.textStyle.y;\r\n            if (this.textStyle.yDirection === \"bottom\") {\r\n                newAxisY -= this.floatableItems.height;\r\n            }\r\n\r\n            if (state.speedMoveStep === null || state.appFrameRate !== this.textRenderer.app.frameRate) {\r\n                state.appFrameRate = this.textRenderer.app.frameRate;\r\n                const now = window.performance.now();\r\n                const elapsedTime = now - (now - (1000 / this.textRenderer.app.frameRate));\r\n                const timePerSpeed = 1000 / this.textStyle.floatingText.speed;\r\n                state.speedMoveStep = elapsedTime / timePerSpeed;\r\n            }\r\n\r\n            state.moving_x -= state.speedMoveStep;\r\n\r\n            if (state.total_width + state.moving_x <= this.floatableItems.frame.width) {\r\n                //state.moving_x = this.floatableItems.frame.width - (this.floatableItems._state.total_width);\r\n                state.moving_x = 0;\r\n            }\r\n\r\n            let nextMovingX = state.moving_x;\r\n            let widthPos = 0;\r\n            let lastTestNextMovingX = nextMovingX;\r\n            for (const item of this.floatableItems.items) {\r\n                widthPos += item.width;\r\n                const testNextMovingX = widthPos + nextMovingX;\r\n                if (testNextMovingX > 0 &&\r\n                    (this.floatableItems.frame.width >= testNextMovingX\r\n                        ||\r\n                        (lastTestNextMovingX > 0 && this.floatableItems.frame.width >= lastTestNextMovingX)\r\n                    )\r\n                ) {\r\n                    this.TheImageRenderer.update({\r\n                        toRenderID: item.id,\r\n                        width: item.width,\r\n                        height: item.height,\r\n                        x: testNextMovingX - item.width,\r\n                        y: newAxisY\r\n                    });\r\n                    this.TheImageRenderer.render();\r\n                }\r\n                lastTestNextMovingX = testNextMovingX;\r\n            }\r\n\r\n        } else {\r\n            this.TheImageRenderer.render();\r\n        }\r\n    }\r\n    static canvasToStringUrl(canvas) {\r\n        return new Promise((resolve, reject) => {\r\n            try {\r\n                resolve(canvas.toDataURL());\r\n            } catch (e) {\r\n                reject(e)\r\n            }\r\n        });\r\n    }\r\n\r\n    static calculateTextViewInCanvas(context, text, x, y, {\r\n        maxWidth, maxLine, lineHeight, compactText, hyphenateWord }) {\r\n        const initialY = y;\r\n        const calculatedText = {\r\n            width: 0,\r\n            height: 0,\r\n            highest_line_width: 0,\r\n            highest_line_height: 0,\r\n            lines: []\r\n        };\r\n        let noMoreBreakAll = false;\r\n        let ellipseNextLine = false;\r\n\r\n        let itStillHaveMoreBeforeEllipsed = false;\r\n\r\n        if (maxLine === 1) {\r\n            ellipseNextLine = true;\r\n        }\r\n\r\n        let lineCountsNow = 0;\r\n        let keepLineForFinalEllipse = null;\r\n        const pasteCalculatedLine = (line, isUserNewLine, isCalledFromFinal) => {\r\n            if (ellipseNextLine && !isCalledFromFinal) {\r\n                lineCountsNow++;\r\n                keepLineForFinalEllipse = { line, isUserNewLine };\r\n                noMoreBreakAll = true;\r\n                return;\r\n            } else if (isCalledFromFinal && !ellipseNextLine) {\r\n                return;\r\n            } else if (isCalledFromFinal && keepLineForFinalEllipse === null) {\r\n                return\r\n            } else if (isCalledFromFinal) {\r\n                line = keepLineForFinalEllipse.line;\r\n                isUserNewLine = keepLineForFinalEllipse.isUserNewLine;\r\n                if (itStillHaveMoreBeforeEllipsed) {\r\n                    line.line = line.line.trimEnd();\r\n                    line.line += \"...\";\r\n                }\r\n            } else {\r\n                lineCountsNow++;\r\n            }\r\n\r\n            if (!isUserNewLine) {\r\n                line.line = line.line.trimStart();\r\n            }\r\n\r\n            line.line = line.line.trimEnd();\r\n\r\n            const metrics = context.measureText(line.line);\r\n            const lineItem = {\r\n                x, y, line: line.line, isWordBreakAtEnd: line.isWordBreakAtEnd,\r\n                height: 0,\r\n                width: 0,\r\n            };\r\n            const mLineHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n            lineItem.width = metrics.width;\r\n            lineItem.height = mLineHeight;\r\n            if (calculatedText.width > calculatedText.highest_line_height) {\r\n                calculatedText.highest_line_height = mLineHeight;\r\n            }\r\n            y += mLineHeight;\r\n            //Add the given lineHeight to the characters metric line height.\r\n            if (lineHeight) y += lineHeight;\r\n            if (metrics.width > maxWidth) {\r\n                calculatedText.width = maxWidth;\r\n            } else if (metrics.width > calculatedText.width) {\r\n                calculatedText.width = metrics.width;\r\n            }\r\n            if (calculatedText.width > calculatedText.highest_line_width) {\r\n                calculatedText.highest_line_width = calculatedText.width;\r\n            }\r\n            calculatedText.height = Math.abs(initialY - y);\r\n            if (maxLine) {\r\n                if (maxLine === (lineCountsNow + 1)) {\r\n                    ellipseNextLine = true;\r\n                }\r\n            }\r\n            calculatedText.lines.push(lineItem);\r\n        }\r\n\r\n        const chars = text.split(\"\\n\");\r\n        let wordsStr = chars.shift();\r\n        let isUserNewLine = null;\r\n        while (wordsStr !== undefined) {\r\n            if (noMoreBreakAll) {\r\n                itStillHaveMoreBeforeEllipsed = true;\r\n                break;\r\n            }\r\n            let line = null;\r\n            const words = wordsStr.split(\" \");\r\n            let word = words.shift();\r\n            isUserNewLine = true;\r\n            while (word !== undefined) {\r\n                if (noMoreBreakAll) {\r\n                    word = undefined;\r\n                    line = null;\r\n                    itStillHaveMoreBeforeEllipsed = true;\r\n                    break\r\n                };\r\n                let testLine = \"\";\r\n                if (line === null) {\r\n                    testLine = word;\r\n                } else {\r\n                    testLine = line + \" \" + word;\r\n                }\r\n                let measureTestLine = testLine;\r\n                if (ellipseNextLine) {\r\n                    measureTestLine += \"...\";\r\n                }\r\n\r\n                const metrics = context.measureText(measureTestLine);\r\n                const testWidth = metrics.width;\r\n\r\n                if (testWidth > maxWidth) {\r\n                    let jumpToMainWrite = true;\r\n                    let testHyphenatedLine = (line ?? word);\r\n                    if (compactText) {\r\n                        testHyphenatedLine = testLine;\r\n                    }\r\n                    if (compactText || testHyphenatedLine.split(\" \").length === 1) {\r\n\r\n                        let testWidth2 = testWidth;\r\n                        if (!compactText) {\r\n                            let testHyphenatedLineMeasureSuffix = \"\";\r\n                            if (ellipseNextLine) {\r\n                                testHyphenatedLineMeasureSuffix = \"...\";\r\n                            }\r\n                            const metrics = context.measureText(testHyphenatedLine + testHyphenatedLineMeasureSuffix);\r\n                            testWidth2 = metrics.width;\r\n                        }\r\n\r\n\r\n                        if (testWidth2 > maxWidth) {\r\n                            jumpToMainWrite = false;\r\n                            if (compactText) {\r\n                                //Hyphenate the last word in current line and postpone the current word. \r\n                                line = null;\r\n                            } else {\r\n                                if (line !== null) {\r\n                                    //Hyphenate the last word in current line and postpone the current word. \r\n                                    words.unshift(word);\r\n                                    line = null;\r\n                                }\r\n                            }\r\n                            //The line is a single word which is longer than the maximum width so we have to hyphenated it.\r\n                            const wordChars = [...testHyphenatedLine];\r\n\r\n                            let hyphenateLongWord = \"\";\r\n                            let hyphenateLongWordAddedCounts = 0;\r\n                            let wordChar = wordChars.shift();\r\n                            let lastCharIsAlphabet = false;\r\n                            while (wordChar !== undefined) {\r\n                                const charIsAlphabet = Text.charsContainAlphabet(wordChar);\r\n                                if (hyphenateLongWordAddedCounts) {\r\n\r\n                                    let continuousWordSuffix = \"\";\r\n                                    if (ellipseNextLine) {\r\n                                        continuousWordSuffix = \"...\";\r\n                                    } else\r\n                                        if (!hyphenateWord) {\r\n                                            continuousWordSuffix = \"\";\r\n                                        } else\r\n                                            if (charIsAlphabet && lastCharIsAlphabet) {\r\n                                                continuousWordSuffix = \"-\";\r\n                                            }\r\n                                    const metrics = context.measureText(hyphenateLongWord + wordChar + continuousWordSuffix);\r\n                                    const testWidth = metrics.width;\r\n                                    if (testWidth > maxWidth) {\r\n                                        if (ellipseNextLine) {\r\n                                            continuousWordSuffix = \"\";\r\n                                        }\r\n                                        pasteCalculatedLine({ isWordBreakAtEnd: true, line: hyphenateLongWord + continuousWordSuffix }, isUserNewLine);\r\n                                        isUserNewLine = false;\r\n                                        hyphenateLongWord = null;\r\n                                        wordChars.unshift(wordChar);\r\n                                        words.unshift(wordChars.join(''));\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                hyphenateLongWord += wordChar;\r\n                                hyphenateLongWordAddedCounts++;\r\n                                lastCharIsAlphabet = charIsAlphabet;\r\n                                wordChar = wordChars.shift();\r\n                            }\r\n                        } else {\r\n                            jumpToMainWrite = true;\r\n                        }\r\n\r\n                    }\r\n                    if (jumpToMainWrite) {\r\n                        let toWrite = \"\";\r\n                        if (line === null) {\r\n                            toWrite = word;\r\n                        } else {\r\n                            toWrite = line;\r\n                            line = word;\r\n                        }\r\n                        pasteCalculatedLine({ line: toWrite }, isUserNewLine);\r\n                        isUserNewLine = false;\r\n                    }\r\n                }\r\n                else {\r\n                    line = testLine;\r\n                }\r\n\r\n\r\n                word = words.shift();\r\n                if (!compactText) {\r\n                    if (word === undefined && line !== null) {\r\n                        const metrics = context.measureText(line);\r\n                        const testWidth = metrics.width;\r\n                        if (testWidth > maxWidth) {\r\n                            word = line;\r\n                            line = null;\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n            }\r\n            if (line !== null) {\r\n                pasteCalculatedLine({ line }, isUserNewLine);\r\n            }\r\n\r\n            wordsStr = chars.shift();\r\n        }\r\n        pasteCalculatedLine(null, null, true);\r\n\r\n        //Subtract the given lineHeight from the last characters metric line height.\r\n        if (lineHeight && calculatedText.height) {\r\n            calculatedText.height -= lineHeight;\r\n        }\r\n\r\n        return calculatedText;\r\n    }\r\n\r\n    static charsContainAlphabet(str) {\r\n        if (typeof str !== 'string') return false;\r\n        const matches = str.match(/\\p{L}/gu); // Match any Unicode letter character\r\n        return matches !== null;\r\n    }\r\n    static normalizeRGB_RGBA_Array_To_255_String(rgb) {\r\n        if (!rgb || !rgb.length) {\r\n            return \"rgb(0, 0, 0)\";\r\n        } else if (rgb <= 3) {\r\n            const r = rgb[0];\r\n            const g = rgb[1] ?? 0;\r\n            const b = rgb[2] ?? 0;\r\n            return `rgb(${r * 255}, ${g * 255}, ${b * 255})`;\r\n        } else {\r\n            const r = rgb[0];\r\n            const g = rgb[1];\r\n            const b = rgb[2];\r\n            const a = rgb[3];\r\n            return `rgba(${r * 255}, ${g * 255}, ${b * 255}, ${a})`;\r\n        }\r\n    }\r\n    destroy(unlinkCache = false) {\r\n        if(this.TheImageRenderer){\r\n            this.TheImageRenderer.destroy(unlinkCache);\r\n        }\r\n    }\r\n}","import Extension from '../../extension';\nimport Text from './Text';\nclass TextRenderer extends Extension {\n  constructor(\n    app,\n  ) {\n    super(app);\n  }\n  NewText(text, textStyle, willUpdateStyleAfterGettingSizeCb){\n    return new Text(this, text, textStyle, willUpdateStyleAfterGettingSizeCb);\n  }\n}\nexport default TextRenderer;","var TARGET = document;\n_EventHandlePolyfill();\n\nfunction _EventHandlePolyfill() {\n  if (typeof window.EventHandle === 'function') {\n    return;\n  }\n\n  function EventHandle(event, params) {\n    var evt = document.createEvent('CustomEvent');\n\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\n    return evt;\n  }\n\n  EventHandle.prototype = window.Event.prototype;\n  window.EventHandle = EventHandle;\n}\n\n/**\n * @param {String} eventName \n * @param {Object} detail\n */\nfunction _dispatchEvent(eventName, detail) {\n  var event = new EventHandle(eventName, {\n    detail: detail\n  });\n\n  TARGET.dispatchEvent(event);\n}\nexport default class EventHandler {\n  constructor(\n    appID\n  ) {\n    this.eventPrefix = 'vc-videos-renderer-event--' + appID;\n  }\n\n\n  on(eventName, callback) {\n    if (typeof eventName === 'string') {\n      TARGET.addEventListener(this.eventPrefix + eventName, callback);\n    } else {\n      eventName.forEach((evt) => {\n        TARGET.addEventListener(this.eventPrefix + evt, callback);\n      });\n    }\n    return {\n      remove: () => {\n        if (typeof eventName === 'string') {\n          TARGET.removeEventListener(this.eventPrefix + eventName, callback);\n        } else {\n          eventName.forEach((evt) => {\n            TARGET.removeEventListener(this.eventPrefix + evt, callback);\n          });\n        }\n      }\n    }\n  }\n  /**\n   * @param {String} eventName \n   * @param {Function} callback \n   */\n  once(eventName, callback) {\n    TARGET.addEventListener(this.eventPrefix + eventName, callback, {\n      once: true\n    });\n    return {\n      remove: () => {\n        TARGET.removeEventListener(this.eventPrefix + eventName, callback);\n      }\n    }\n  }\n\n  /**\n   * @param {String} eventName \n   */\n  off(eventName, Fn) {\n    TARGET.removeEventListener(this.eventPrefix + eventName, Fn);\n  }\n\n  /**\n   * @param {String} eventName \n   * @param {Object} detail\n   */\n  fire(eventName, detail) {\n    _dispatchEvent(this.eventPrefix + eventName, detail);\n  }\n}","import VcVideosRenderer from './VcVideosRenderer';\n\nconst extensionsBased = {};\n\n\nconst mergeExtension = (name, extension) => {\n  extension.prototype.name = name;\n  return function(...args) {\n    const instance = new extension(...[this, ...args]);\n    return instance;\n  };\n};\nclass Extension {\n  constructor(app) {\n    if (this.constructor === Extension) {\n      throw new Error('Invalid Extension!');\n    }\n    this.app = app;\n  }\n  \n  static addExtension(extension, name) {\n    if (typeof name !== 'string') {\n      throw new Error(`Extension name must be a type string \"${name}\"!`);\n    }\n\n    if(!name){\n      throw new Error(`Extension must have a name!`);\n    }\n\n    if (extensionsBased[name] || VcVideosRenderer.prototype.hasOwnProperty(name)) {\n      throw new Error(`Found existing extension same name with \"${name}\"!`);\n    }\n\n    if (typeof extension !== 'function') {\n      throw new Error(`\"${name}\" must be a type function!`);\n    }\n    extensionsBased[name] = extension;\n    VcVideosRenderer.prototype._extensions[name] = mergeExtension(name, extension);\n\n    return extension;\n  }\n\n}\n\nExtension.addExtension(Extension, 'extension');\n\nexport default Extension;","import VcVideosRenderer from './VcVideosRenderer';\nimport Extension from './extension';\nimport ImageRenderer from './core-extenstions/imageRenderer/ImageRenderer';\nimport TextRenderer from './core-extenstions/textRenderer/TextRenderer';\nVcVideosRenderer.Extension = Extension;\nExtension.addExtension(ImageRenderer, 'ImageRenderer');\nExtension.addExtension(TextRenderer, 'TextRenderer');\nwindow.VcVideosRenderer = VcVideosRenderer;\nexport default VcVideosRenderer;","const VCVRDEnum = {\r\n\tunsupported: {\r\n\t\tcode: \"unsupported\",\r\n\t\tmessage: \"Unsupported\"\r\n\t},\r\n\tunsupported_webgl: {\r\n\t\tcode: \"unsupported-webgl\",\r\n\t\tmessage: \"Your browser does not support WebGL!\"\r\n\t},\r\n\tdrawing_already_progress: {\r\n\t\tcode: \"drawing-already-progress\",\r\n\t\tmessage: \"Drawing is already in progress.\"\r\n\t},\r\n\tno_such_extension_found: {\r\n\t\tcode: \"no-such-extension-found\",\r\n\t\tmessage: \"No such extension found!\"\r\n\t},\r\n\tvcVideosRenderer_already_destroyed: {\r\n\t\tcode: \"vcVideosRenderer_already_destroyed\",\r\n\t\tmessage: \"VC Videos Renderer has already be destroyed!\"\r\n\t},\r\n};\r\nexport default VCVRDEnum;","export default class VCVRDError extends Error {\r\n    constructor(message, {code}) {\r\n        super(message);\r\n        this._vCVRDError_params = {\r\n            code\r\n        };\r\n    }\r\n    get vCVRDErrorCode() {\r\n         return this._vCVRDError_params.code;\r\n    }\r\n    static NewErrorFromEnumItem(vcVrdEnumItem) {\r\n        return new VCVRDError(vcVrdEnumItem.message, {code: vcVrdEnumItem.code});\r\n    }\r\n}","import CustomAnimationFrameRunner from \"./CustomAnimationFrameRunner\";\r\nexport default class CaptureMediaStreamFromMediaElement extends MediaStream {\r\n    #_weakMaps = null;\r\n    #_mediaElement = null;\r\n    #_fps = 30;\r\n    #_directMediaStream = null;\r\n    #_takeKindsOnly = [\"video\", \"audio\"];\r\n    constructor(mediaElement, takeKindsOnly) {\r\n        super();\r\n        if (!window._vcvrdr_CMSFME_WeakMaps) {\r\n            window._vcvrdr_CMSFME_WeakMaps = {\r\n                video: new WeakMap(),\r\n                audio: new WeakMap()\r\n            };\r\n        }\r\n        this.#_weakMaps = window._vcvrdr_CMSFME_WeakMaps;\r\n        this.#_mediaElement = mediaElement;\r\n        if (Array.isArray(takeKindsOnly)) {\r\n            this.#_takeKindsOnly = takeKindsOnly;\r\n        }\r\n        this.#_captureMediaStream();\r\n    }\r\n    #_captureMediaStream() {\r\n        const putTrackToOutput = (track) => {\r\n            if (!this.#_takeKindsOnly.includes(track.kind)) return;\r\n            super.addTrack(track);\r\n        };\r\n        if ('captureStream' in this.#_mediaElement) {\r\n            this.#_directMediaStream = this.#_mediaElement.captureStream();\r\n            this.#_directMediaStream.getTracks().forEach(track => putTrackToOutput(track));\r\n            return;\r\n        }\r\n        //For cross-browser that have no support for HTMLMediaElement captureStream.\r\n        if (this.#_takeKindsOnly.includes(\"video\")) {\r\n            let MediaVideo = this.#_weakMaps.video.get(this.#_mediaElement);\r\n            if (!MediaVideo) {\r\n                MediaVideo = {\r\n                    canvasCtx: document.createElement('canvas').getContext('2d'),\r\n                    references: [],\r\n                    destroyed: false,\r\n                    isDrawing: false,\r\n                    _unlinkRef: null,\r\n                    _destroy: null,\r\n                    MediaStreamTrackVideo: null,\r\n                    GetClonedVideoTrack: null,\r\n                    AnimationFrameRunner: new CustomAnimationFrameRunner(),\r\n                    ref: {\r\n                        _canplay: null,\r\n                        _do_render: null,\r\n                        _startDrawing: null,\r\n                        _pauseDrawing: null\r\n                    }\r\n                }\r\n\r\n                MediaVideo.MediaStreamTrackVideo = MediaVideo.canvasCtx.canvas.captureStream().getVideoTracks()[0];\r\n\r\n\r\n                MediaVideo._do_render = () => {\r\n                    if (MediaVideo.destroyed) {\r\n                        throw \"The Video MediaStreamTrack has already been destroyed!\";\r\n                    }\r\n\r\n                    MediaVideo.canvasCtx.canvas.width = this.#_mediaElement.videoWidth;\r\n                    MediaVideo.canvasCtx.canvas.height = this.#_mediaElement.videoHeight;\r\n\r\n                    MediaVideo.canvasCtx.drawImage(this.#_mediaElement, 0, 0, MediaVideo.canvasCtx.canvas.width, MediaVideo.canvasCtx.canvas.height);\r\n                }\r\n                MediaVideo._startDrawing = () => {\r\n                    if (MediaVideo.destroyed) {\r\n                        throw \"The Video MediaStreamTrack has already been destroyed!\";\r\n                    }\r\n                    if (MediaVideo.isDrawing) return;\r\n                    MediaVideo.isDrawing = true;\r\n                    MediaVideo.AnimationFrameRunner.start(()=>MediaVideo._do_render(), this.#_fps);\r\n                }\r\n                MediaVideo._stopDrawing = () => {\r\n                    MediaVideo.AnimationFrameRunner.stop();\r\n                    MediaVideo.isDrawing = false;\r\n                }\r\n                MediaVideo._canplay = () => {\r\n                    if (!MediaVideo.isDrawing) {\r\n                        //Update the frame if there's some changes, when paused.\r\n                        MediaVideo._do_render();\r\n                    }\r\n                }\r\n                if (!this.#_mediaElement.paused) {\r\n                    MediaVideo._startDrawing();\r\n                }\r\n                this.#_mediaElement.addEventListener('canplay', MediaVideo._canplay);\r\n                this.#_mediaElement.addEventListener('pause', MediaVideo._pauseDrawing);\r\n                this.#_mediaElement.addEventListener('ended', MediaVideo._pauseDrawing);\r\n                this.#_mediaElement.addEventListener('play', MediaVideo._startDrawing);\r\n\r\n                if (this.#_mediaElement.readyState >= 1) {\r\n                    MediaVideo._canplay();\r\n                }\r\n\r\n                MediaVideo._destroy = () => {\r\n                    if (MediaVideo.destroyed) return;\r\n                    this.#_mediaElement.removeEventListener('canplay', MediaVideo._canplay);\r\n                    this.#_mediaElement.removeEventListener('pause', MediaVideo._pauseDrawing);\r\n                    this.#_mediaElement.removeEventListener('ended', MediaVideo._pauseDrawing);\r\n                    this.#_mediaElement.removeEventListener('play', MediaVideo._startDrawing);\r\n                    MediaVideo._stopDrawing();\r\n                    MediaVideo.destroyed = true;\r\n                    this.#_weakMaps.video.delete(this.#_mediaElement);\r\n                }\r\n\r\n                this.#_weakMaps.video.set(this.#_mediaElement, MediaVideo);\r\n            }\r\n\r\n            MediaVideo._unlinkRef = (refID) => {\r\n                for (const index in MediaVideo.references) {\r\n                    const lpRefID = MediaVideo.references[index];\r\n                    if (lpRefID !== refID) continue;\r\n                    CaptureMediaStreamFromMediaElement.#deleteArrayItemIndex(MediaVideo.references, index);\r\n                    break;\r\n                }\r\n                if (!MediaVideo.references.length) {\r\n                    //We can destroy the renderer since no more references.\r\n                    MediaVideo._destroy();\r\n                }\r\n            }\r\n\r\n            MediaVideo.getClonedVideoTrack = () => {\r\n                if (MediaVideo.destroyed) {\r\n                    throw \"The Video MediaStreamTrack has already been destroyed!\";\r\n                }\r\n                if (!window._CMSFME_vidmst_increment_id) {\r\n                    window._CMSFME_vidmst_increment_id = 0;\r\n                }\r\n                const refID = \"id-\" + (window._CMSFME_vidmst_increment_id++);\r\n                MediaVideo.references.push(refID);\r\n                const clonedVideoMediaStreamTrack = MediaVideo.MediaStreamTrackVideo.clone();\r\n                clonedVideoMediaStreamTrack.addEventListener(\"ended\", () => {\r\n                    MediaVideo._unlinkRef(refID);\r\n                });\r\n                return clonedVideoMediaStreamTrack;\r\n            }\r\n\r\n            if (MediaVideo) {\r\n                const clonedVideoTrack = MediaVideo.getClonedVideoTrack();\r\n                putTrackToOutput(clonedVideoTrack);\r\n            }\r\n        }\r\n\r\n        if (this.#_takeKindsOnly.includes(\"audio\")) {\r\n            let MediaAudio = this.#_weakMaps.audio.get(this.#_mediaElement);\r\n            if (!MediaAudio) {\r\n                MediaAudio = {\r\n                    audioContext: new AudioContext(),\r\n                    audioGain: null,\r\n                    sourceNode: null,\r\n                    destination: null,\r\n                    MediaStreamTrackAudio: null,\r\n                    processedAudioElement: null\r\n                }\r\n\r\n                MediaAudio.destination = MediaAudio.audioContext.createMediaStreamDestination();\r\n                MediaAudio.audioGain = MediaAudio.audioContext.createGain();\r\n                MediaAudio.audioGain.connect(MediaAudio.destination);\r\n\r\n                MediaAudio.sourceNode = MediaAudio.audioContext.createMediaElementSource(this.#_mediaElement);\r\n                MediaAudio.sourceNode.connect(MediaAudio.audioGain);\r\n                MediaAudio.audioContext.resume();\r\n                const audioTracks = MediaAudio.destination.stream.getAudioTracks();\r\n                MediaAudio.MediaStreamTrackAudio = audioTracks[0];\r\n\r\n                //We have to connect it back to a separate player since we already disconnect the audio from its original destination.\r\n                MediaAudio.processedAudioElement = new Audio();\r\n                MediaAudio.processedAudioElement.srcObject = new MediaStream(audioTracks);\r\n                MediaAudio.processedAudioElement.play();\r\n\r\n                this.#_weakMaps.audio.set(this.#_mediaElement, MediaAudio);\r\n            }\r\n            if (MediaAudio) {\r\n                const clonedAudioTrack = MediaAudio.MediaStreamTrackAudio.clone();\r\n                putTrackToOutput(clonedAudioTrack);\r\n            }\r\n        }\r\n    }\r\n    stop() {\r\n        super.getTracks().forEach(track => {\r\n            track.stop();\r\n            track.dispatchEvent(new Event(\"ended\"));\r\n        });\r\n        if (this.#_directMediaStream) {\r\n            this.#_directMediaStream.getTracks().forEach(track => track.stop());\r\n        }\r\n    }\r\n    static #deleteArrayItemIndex(array, index) {\r\n        index = Number(index);\r\n        if (!array.length || array.length < index + 1) return;\r\n        array.splice(index, 1);\r\n    }\r\n}","\r\nexport function calculateWidthFromRatio(height, ratio, borderSizes = [0/*T*/, 0/*R*/, 0/*B*/, 0/*L*/]) {\r\n    const [numerator, denominator] = ratio.split(':').map(Number);\r\n    const width = (((height - (borderSizes[0] + borderSizes[2])) * numerator) / denominator) + (borderSizes[1] + borderSizes[3]);\r\n    return width;\r\n}\r\nexport function calculateHeightFromRatio(width, ratio, borderSizes = [0, 0, 0, 0]) {\r\n    const [numerator, denominator] = ratio.split(':').map(Number);\r\n    const height = (((width - (borderSizes[1] + borderSizes[3])) * denominator) / numerator) + (borderSizes[0] + borderSizes[2]);\r\n    return height;\r\n}\r\nexport function deleteIndex(array, index) {\r\n    index = Number(index);\r\n    if (!array.length || array.length < index + 1) return;\r\n    array.splice(index, 1);\r\n  }","//The reason for this is that will also need to run our renderer from foreground.\r\nexport default class CustomAnimationFrameRunner {\r\n    #defaultFPS = 30;\r\n    #runnerWorker = null;\r\n    #renderCB = null;\r\n    constructor() {\r\n        this.#init();\r\n    }\r\n    start(render, fps = this.#defaultFPS) {\r\n        this.#renderCB = render;\r\n        this.#runnerWorker.postMessage({ start: true, fps });\r\n    }\r\n    stop() {\r\n        this.#runnerWorker.postMessage({ start: false });\r\n        this.#renderCB = null;\r\n    }\r\n    #init() {\r\n        const workerScriptHolder = () => {\r\n            let _animating = false;\r\n            let _aniInterval = null;\r\n            let _lastRenderTime = 0;\r\n            const _StartRunner = () => {\r\n                if (_animating) return;\r\n                _animating = true;\r\n                const render = () => {\r\n                    if (!_animating) return;\r\n                    const currentTime = performance.now();\r\n                    const elapsedTime = currentTime - _lastRenderTime;\r\n                    if (elapsedTime >= _aniInterval) {\r\n                        _lastRenderTime = currentTime;\r\n                        // Perform rendering.\r\n                        self.postMessage({ currentTime })\r\n                        // Request the next frame after rendering.\r\n                        requestAnimationFrame(render);\r\n                    } else {\r\n                        // Not enough time has elapsed.\r\n                        requestAnimationFrame(render);\r\n                    }\r\n                }\r\n                render();\r\n            }\r\n            self.onmessage = function ({ data: { start, fps = 30 } }) {\r\n                if (start) {\r\n                    _aniInterval = 1000 / fps;\r\n                    _lastRenderTime = 0;\r\n                    _StartRunner();\r\n                } else {\r\n                    _animating = false;\r\n                }\r\n            };\r\n        };\r\n\r\n        let workerScriptStr = workerScriptHolder.toString();\r\n        workerScriptStr = workerScriptStr.substring(workerScriptStr.indexOf(\"{\") + 1, workerScriptStr.lastIndexOf(\"}\"));\r\n        const workerScriptBlob = URL.createObjectURL(new Blob([workerScriptStr], { type: \"application/javascript\" }));\r\n        this.#runnerWorker = new Worker(workerScriptBlob);\r\n\r\n        this.#runnerWorker.onmessage = ({ data: { currentTime } }) => {\r\n            try {\r\n                this.#renderCB(currentTime);\r\n            } catch (er) {\r\n                this.stop();\r\n                throw er;\r\n            }\r\n        };\r\n    }\r\n}","import { calculateWidthFromRatio, calculateHeightFromRatio } from './Common';\r\nexport function createShader(gl, type, source) {\r\n\tconst shader = gl.createShader(type);\r\n\tgl.shaderSource(shader, source);\r\n\tgl.compileShader(shader);\r\n\tconst compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n\tif (!compiled) {\r\n\t\tconsole.log('shader not compiled!');\r\n\t\tconsole.log(gl.getShaderInfoLog(shader));\r\n\t}\r\n\treturn shader;\r\n}\r\n\r\nexport function createProgram(gl, vertexShader, fragmentShader) {\r\n\tconst program = gl.createProgram();\r\n\tgl.attachShader(program, vertexShader);\r\n\tgl.attachShader(program, fragmentShader);\r\n\tgl.linkProgram(program);\r\n\tgl.useProgram(program);\r\n\treturn program;\r\n}\r\nexport function createBuffer(gl, data, type) {\r\n\tconst buffer = gl.createBuffer();\r\n\tgl.bindBuffer(type, buffer);\r\n\tgl.bufferData(type, data, gl.STATIC_DRAW);\r\n\treturn buffer;\r\n}\r\n\r\nexport function setBufferData(gl, location, buffer) {\r\n\tgl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n\tgl.vertexAttribPointer(location, 2, gl.FLOAT, false, 0, 0);\r\n\tgl.enableVertexAttribArray(location);\r\n}\r\n\r\nexport function createTexture(gl) {\r\n\tconst texture = gl.createTexture();\r\n\tgl.bindTexture(gl.TEXTURE_2D, texture);\r\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\treturn texture;\r\n}\r\nexport function createRectVertices(canvas, { x, y, width, height, borderWidth }) {\r\n\tlet newLeft = x;\r\n\tlet newTop = y;\r\n\tlet newWidth = width;\r\n\tlet newHeight = height;\r\n\r\n\tif (borderWidth) {\r\n\t\tnewLeft -= borderWidth;\r\n\t\tnewTop -= borderWidth;\r\n\t\tnewWidth += borderWidth * 2;\r\n\t\tnewHeight += borderWidth * 2;\r\n\t}\r\n\r\n\tconst left = newLeft;\r\n\tconst right = left + newWidth;\r\n\tconst top = newTop;\r\n\tconst bottom = top + newHeight;\r\n\tconst canvasWidth = canvas.width / window.devicePixelRatio;\r\n\tconst canvasHeight = canvas.height / window.devicePixelRatio;\r\n\tconst leftNorm = left / canvasWidth * 2 - 1;\r\n\tconst rightNorm = right / canvasWidth * 2 - 1;\r\n\tconst topNorm = 1 - top / canvasHeight * 2;\r\n\tconst bottomNorm = 1 - bottom / canvasHeight * 2;\r\n\treturn new Float32Array([leftNorm, topNorm, rightNorm, topNorm, leftNorm, bottomNorm, rightNorm, bottomNorm]);\r\n}\r\nexport function calculateVerticesPosition(canvas, { x, y, objectFit, width, height, borderWidth, imageWidth, imageHeight }) {\r\n\tif (borderWidth) {\r\n\t\tx += borderWidth;\r\n\t\ty += borderWidth;\r\n\t\twidth -= borderWidth * 2;\r\n\t\theight -= borderWidth * 2;\r\n\t} else {\r\n\t\tborderWidth = 0;\r\n\t}\r\n\tif (objectFit === \"contain\") {\r\n\t\tlet newLeft = x;\r\n\t\tlet newTop = y;\r\n\t\tlet newWidth = width;\r\n\t\tlet newHeight = height;\r\n\r\n\t\tif (imageWidth > imageHeight && newWidth > newHeight || imageWidth < imageHeight && newWidth > newHeight) {\r\n\t\t\tnewWidth = calculateWidthFromRatio(newHeight, imageWidth + ':' + imageHeight, [borderWidth, borderWidth, borderWidth, borderWidth]);\r\n\t\t\tnewLeft += (width - newWidth) / 2;\r\n\t\t} else {\r\n\t\t\tnewHeight = calculateHeightFromRatio(newWidth, imageWidth + ':' + imageHeight, [borderWidth, borderWidth, borderWidth, borderWidth]);\r\n\t\t\tnewTop += (height - newHeight) / 2;\r\n\t\t}\r\n\t\tconst left = newLeft;\r\n\t\tconst right = left + newWidth;\r\n\t\tconst top = newTop;\r\n\t\tconst bottom = top + newHeight;\r\n\t\tconst canvasWidth = canvas.width / window.devicePixelRatio;\r\n\t\tconst canvasHeight = canvas.height / window.devicePixelRatio;\r\n\t\tconst leftNorm = left / canvasWidth * 2 - 1;\r\n\t\tconst rightNorm = right / canvasWidth * 2 - 1;\r\n\t\tconst topNorm = 1 - top / canvasHeight * 2;\r\n\t\tconst bottomNorm = 1 - bottom / canvasHeight * 2;\r\n\t\treturn new Float32Array([leftNorm, topNorm, rightNorm, topNorm, leftNorm, bottomNorm, rightNorm, bottomNorm]);\r\n\t} else if (objectFit === \"cover\") {\r\n\t\tlet newLeft = x;\r\n\t\tlet newTop = y;\r\n\t\tlet newWidth = width;\r\n\t\tlet newHeight = height;\r\n\r\n\t\tif (imageWidth > imageHeight && newWidth > newHeight || imageWidth < imageHeight && newWidth > newHeight) {\r\n\t\t\tnewHeight = calculateHeightFromRatio(newWidth, imageWidth + ':' + imageHeight, [borderWidth, borderWidth, borderWidth, borderWidth]);\r\n\t\t\tnewTop += (height - newHeight) / 2;\r\n\t\t} else {\r\n\t\t\tnewWidth = calculateWidthFromRatio(newHeight, imageWidth + ':' + imageHeight, [borderWidth, borderWidth, borderWidth, borderWidth]);\r\n\t\t\tnewLeft += (width - newWidth) / 2;\r\n\t\t}\r\n\t\tconst left = newLeft;\r\n\t\tconst right = left + newWidth;\r\n\t\tconst top = newTop;\r\n\t\tconst bottom = top + newHeight;\r\n\t\tconst canvasWidth = canvas.width / window.devicePixelRatio;\r\n\t\tconst canvasHeight = canvas.height / window.devicePixelRatio;\r\n\t\tconst leftNorm = left / canvasWidth * 2 - 1;\r\n\t\tconst rightNorm = right / canvasWidth * 2 - 1;\r\n\t\tconst topNorm = 1 - top / canvasHeight * 2;\r\n\t\tconst bottomNorm = 1 - bottom / canvasHeight * 2;\r\n\t\treturn new Float32Array([leftNorm, topNorm, rightNorm, topNorm, leftNorm, bottomNorm, rightNorm, bottomNorm]);\r\n\t} else {\r\n\t\t// objectFit === \"stretch\"\r\n\t\tconst left = x;\r\n\t\tconst right = left + width;\r\n\t\tconst top = y;\r\n\t\tconst bottom = top + height;\r\n\t\tconst canvasWidth = canvas.width / window.devicePixelRatio;\r\n\t\tconst canvasHeight = canvas.height / window.devicePixelRatio;\r\n\t\tconst leftNorm = left / canvasWidth * 2 - 1;\r\n\t\tconst rightNorm = right / canvasWidth * 2 - 1;\r\n\t\tconst topNorm = 1 - top / canvasHeight * 2;\r\n\t\tconst bottomNorm = 1 - bottom / canvasHeight * 2;\r\n\t\treturn new Float32Array([leftNorm, topNorm, rightNorm, topNorm, leftNorm, bottomNorm, rightNorm, bottomNorm]);\r\n\t}\r\n}\r\n","import VCVRDEnum from './logs/VCVRDEnum';\nimport VCVRDError from './logs/VCVRDError';\nimport EventHandler from './event-handle';\nimport RoundedRectBorderEntryPointSource from '!raw-loader!./shaders/rounded-rect-border-entry-point.frag';\nimport mutedMicImageURL from \"@/../asset/vc-videos-renderer/images/muted-mic.png\";\nimport defaultAvatarURL from \"@/../asset/vc-videos-renderer/images/default-avatar.png\";\nimport defaultReconnectingAvatarURL from \"@/../asset/vc-videos-renderer/images/default-reconnecting-avatar.png\";\nimport Env from \"@/../env.json\";\nimport CustomAnimationFrameRunner from \"./utils/CustomAnimationFrameRunner\";\n\nimport {\n  createShader,\n  createProgram,\n  createBuffer,\n  setBufferData,\n  calculateVerticesPosition,\n  createRectVertices,\n  createTexture,\n} from './utils/GLHelpers';\nimport {\n  calculateHeightFromRatio,\n  deleteIndex\n} from './utils/Common';\nimport CaptureMediaStreamFromMediaElement from './utils/CaptureMediaStreamFromMediaElement';\n\n\nvar _vcVrd__gid = 1;\nclass vcVideosRendererCore {\n  constructor(\n    canvas,\n    options\n  ) {\n    this.extState = {};\n    this.options = options;\n    this.debug = this.options.debug;\n    this.frameRate = this.options.frameRate;\n    this.canvas = canvas;\n    this.console = this.console();\n    this.appID = 'vc-videos-renderer_' + this.generateIncreamentID();\n    this.session = {};\n    this.Event = new EventHandler(this.appID);\n    this.gl = null;\n    this.itemsToMergerList = [];\n    this.audioItemsToMergerList = [];\n    this.isDrawing = false;\n    this.AnimationFrameRunner = new CustomAnimationFrameRunner();\n    this.shaders = null;\n\n    this.ImageRenderer = null;\n    this.TextRenderer = null;\n\n    this.MediaStream = null;\n    this.MediaStreamTrackVideo = null;\n    this.MediaAudio = null;\n    this.MediaStreamTrackAudio = null;\n\n    this.destroyed = false;\n\n    this._cachedTextures = {\n      fetchingCaches: [],\n      caches: []\n    }\n    this.waiting_animation_ImageRenderer = null;\n    this._initDefaultEvent();\n  }\n  generateIncreamentID() {\n    return _vcVrd__gid++;\n  }\n  _getMixedStream() {\n    return this.MediaStream;\n  }\n  _initDefaultEvent() {\n    this._initWebGL();\n\n    const waitingAnimationsTextures = [];\n    for (let i = 0; i < 55; i++) {\n      const frameUrl = `${Env.publicPath}asset/vc-videos-renderer/images/gif/waiting/waiting-100x54-${i}.png`;\n      waitingAnimationsTextures.push({\n        URL: frameUrl\n      });\n    }\n    this.waiting_animation_ImageRenderer = this.ImageRenderer.NewImageFromURLs(waitingAnimationsTextures,\n      {\n        gif: {\n          isGif: true,\n          frameRate: 30,\n        },\n        width: 100,\n        height: 54,\n        x: 200,\n        y: 200,\n        objectFit: \"contain\",\n        borderSoftness: 0\n      });\n  }\n\n  _resetFrame(frameItems, updateItemsOnly) {\n    const oldItemsToMergerListAsMap = {};\n    for (const old_mItem of this.itemsToMergerList) {\n      if (updateItemsOnly) {\n        for (const itemProp of frameItems) {\n          if (itemProp.id !== old_mItem.id) continue;\n          oldItemsToMergerListAsMap[old_mItem.id] = old_mItem;\n          break;\n        }\n      } else {\n        oldItemsToMergerListAsMap[old_mItem.id] = old_mItem;\n      }\n    }\n    const newItemsToMergerList = [];\n    for (const i in frameItems) {\n      const itemProp = frameItems[i];\n      let old_mItem = oldItemsToMergerListAsMap[itemProp.id];\n      if (updateItemsOnly && !old_mItem) {\n        this.console.warn(`No frame item as id \"${itemProp.id}\" for update!`);\n        continue;\n      }\n      if (itemProp.type === \"video\") {\n\n        const mItem = {\n          type: itemProp.type,\n          id: itemProp.id,\n          videoElement: itemProp.videoElement,\n          renderVideo: itemProp.renderVideo,\n          renderAudio: itemProp.renderAudio,\n          cameraDisabled: itemProp.cameraDisabled,\n          audioDisabled: itemProp.audioDisabled,\n          displayName: itemProp.displayName,\n          isWaiting: (itemProp.isWaiting ?? false),\n          isReconnecting: (itemProp.isReconnecting ?? false),\n          isVideoReady: false,\n          reconnectingAvatarURL: itemProp.reconnectingAvatarURL ? itemProp.reconnectingAvatarURL : defaultReconnectingAvatarURL,\n          avatarURL: itemProp.avatarURL ? itemProp.avatarURL : defaultAvatarURL,\n          width: itemProp.width,\n          height: itemProp.height,\n          x: itemProp.x,\n          y: itemProp.y,\n          objectFit: itemProp.objectFit,\n          borderRadius: itemProp.borderRadius,\n          backgroundColor: itemProp.backgroundColor,\n          borderColor: itemProp.borderColor,\n          borderWidth: itemProp.borderWidth,\n          borderSoftness: (itemProp.borderSoftness ?? 2),\n          innerBorder: {\n            borderColor: itemProp.innerBorder?.borderColor,\n            borderWidth: itemProp.innerBorder?.borderWidth,\n          },\n          _mitem_state: {\n            Reconnecting_ImageRenderer: null,\n            DisplayName_TextRenderer: null,\n            videoTexture: null,\n          }\n        }\n\n        this._addEventToVideo(mItem);\n\n        let isSameDimension = false;\n        let isSamePosition = false;\n        let isSameBorderRadius = false;\n\n        if (old_mItem && old_mItem.type === \"video\") {\n          delete oldItemsToMergerListAsMap[itemProp.id];\n          this._removeEventFromVideo(old_mItem);\n          if (this._compareObjectsProperties(old_mItem, mItem, [\n            {\n              key1: \"width\",\n              key2: \"width\",\n            },\n            {\n              key1: \"height\",\n              key2: \"height\",\n            },\n            {\n              key1: \"borderWidth\",\n              key2: \"borderWidth\",\n            }\n          ])) {\n            isSameDimension = true;\n          }\n          if (this._compareObjectsProperties(old_mItem, mItem, [\n            {\n              key1: \"x\",\n              key2: \"x\",\n            },\n            {\n              key1: \"y\",\n              key2: \"y\",\n            }\n          ])) {\n            isSamePosition = true;\n          }\n          if (this._compareObjectsProperties(old_mItem, mItem, [\n            {\n              key1: \"borderRadius\",\n              key2: \"borderRadius\",\n            }\n          ])) {\n            isSameBorderRadius = true;\n          }\n        } else {\n          old_mItem = null;\n        }\n\n        if (old_mItem && old_mItem._mitem_state.videoTexture) {\n          mItem._mitem_state.videoTexture = old_mItem._mitem_state.videoTexture;\n          old_mItem._mitem_state.videoTexture = null;\n        } else {\n          mItem._mitem_state.videoTexture = createTexture(this.gl)/*Store video textures.*/;\n        }\n\n        if (true/*Just a block for waitingDimension*/) {\n          if (!old_mItem || !old_mItem.waitingDimension || !isSameDimension || !isSamePosition) {\n            mItem.waitingDimension = {\n              width: 20,\n              height: 0,\n              x: 0,\n              y: 0,\n              sessionKey: this.generateIncreamentID()\n            };\n            if (mItem.width > 300) {\n              mItem.waitingDimension.width = 30;\n            }\n            mItem.waitingDimension.height = calculateHeightFromRatio(mItem.waitingDimension.width, \"100:54\");\n\n            mItem.waitingDimension.x = Math.abs(mItem.x + ((mItem.width / 2) - (mItem.waitingDimension.width / 2)));\n            mItem.waitingDimension.y = Math.abs(mItem.y + ((mItem.height / 2) - (mItem.waitingDimension.height / 2)));\n          } else {\n            mItem.waitingDimension = old_mItem.waitingDimension;\n          }\n        }\n        if (true/*Just a block for avatar*/) {\n          const calcDimensions = () => {\n            let avatarSize = null;\n            const avatarBorderSoftness = 2;\n            //We have to make avatar equal with width and height.\n            if (mItem.width > mItem.height) {\n              avatarSize = mItem.height - (mItem.borderWidth ?? 0) - 30;\n            } else {\n              avatarSize = mItem.width - (mItem.borderWidth ?? 0) - 30;\n            }\n            const avatarborderWidth = 2;\n            if ((avatarSize + avatarborderWidth) > 300) {\n              avatarSize = 300 - avatarborderWidth;\n            }\n            const avatarBorderRadius = avatarSize / 2;\n            return {\n              avatarSize,\n              x: Math.abs(mItem.x + ((mItem.width / 2) - (avatarSize / 2))),\n              y: Math.abs(mItem.y + ((mItem.height / 2) - (avatarSize / 2))),\n              borderRadius: avatarBorderRadius,\n              borderWidth: avatarborderWidth,\n              borderSoftness: avatarBorderSoftness\n            }\n          }\n          if (old_mItem && mItem.avatarURL === old_mItem.avatarURL && isSameDimension && isSamePosition) {\n            mItem._mitem_state.Avatar_ImageRenderer = old_mItem._mitem_state.Avatar_ImageRenderer;\n            old_mItem._mitem_state.Avatar_ImageRenderer = null;\n          } else\n            if (old_mItem && mItem.avatarURL === old_mItem.avatarURL && (!isSameDimension || !isSamePosition)) {\n              if (old_mItem._mitem_state.Avatar_ImageRenderer) {\n                const avatarDim = calcDimensions();\n                old_mItem._mitem_state.Avatar_ImageRenderer.update({\n                  width: avatarDim.avatarSize,\n                  height: avatarDim.avatarSize,\n                  x: avatarDim.x,\n                  y: avatarDim.y,\n                  borderWidth: avatarDim.borderWidth,\n                  borderRadius: avatarDim.borderRadius,\n                  borderSoftness: avatarDim.borderSoftness,\n                });\n                mItem._mitem_state.Avatar_ImageRenderer = old_mItem._mitem_state.Avatar_ImageRenderer;\n                old_mItem._mitem_state.Avatar_ImageRenderer = null;\n              }\n            } else\n              if (mItem.avatarURL) {\n                const avatarDim = calcDimensions();\n                mItem._mitem_state.Avatar_ImageRenderer = this.ImageRenderer.NewImageFromURLs([\n                  {\n                    URL: mItem.avatarURL,\n                    cacheID: mItem.avatarURL\n                  }],\n                  {\n                    width: avatarDim.avatarSize,\n                    height: avatarDim.avatarSize,\n                    x: avatarDim.x,\n                    y: avatarDim.y,\n                    objectFit: \"cover\",\n                    backgroundColor: [0, 0, 0, 0],\n                    borderColor: [0, 0.78, 1, 0.4],\n                    borderWidth: avatarDim.borderWidth,\n                    borderRadius: avatarDim.borderRadius,\n                    borderSoftness: avatarDim.borderSoftness,\n                  });\n              }\n\n          if (old_mItem && old_mItem._mitem_state.Avatar_ImageRenderer) {\n            old_mItem._mitem_state.Avatar_ImageRenderer.destroy(old_mItem.avatarURL === defaultAvatarURL ? false : true);\n            old_mItem._mitem_state.Avatar_ImageRenderer = null;\n          }\n        }\n        if (true/*Just a block for displayName*/) {\n          if (old_mItem && mItem.displayName === old_mItem.displayName && isSameDimension && isSameBorderRadius && isSamePosition) {\n            mItem._mitem_state.DisplayName_TextRenderer = old_mItem._mitem_state.DisplayName_TextRenderer;\n            old_mItem._mitem_state.DisplayName_TextRenderer = null;\n          } else\n            if (old_mItem && mItem.displayName === old_mItem.displayName && isSameDimension && isSameBorderRadius && !isSamePosition) {\n              if (old_mItem._mitem_state.DisplayName_TextRenderer) {\n                old_mItem._mitem_state.DisplayName_TextRenderer.update({\n                  x: mItem.x + mItem.width - (mItem.borderWidth ?? 0),\n                  y: mItem.y + mItem.height - (mItem.borderWidth ?? 0)\n                });\n                mItem._mitem_state.DisplayName_TextRenderer = old_mItem._mitem_state.DisplayName_TextRenderer;\n                old_mItem._mitem_state.DisplayName_TextRenderer = null;\n              }\n            } else if (mItem.displayName) {\n              mItem._mitem_state.DisplayName_TextRenderer = this.TextRenderer.NewText(mItem.displayName, {\n                maxWidth: mItem.width - (mItem.borderWidth ?? 0 * 2) - 20,\n                maxLine: 1,\n                fontSize: 12,\n                fontWeight: \"bold\",\n                textColor: [0.9, 0.9, 0.9, 1],\n                backgroundColor: [0, 0, 0, 0.6],\n                padding: [5, 10],\n                borderRadius: [0, 0, mItem.borderRadius, 0],\n                xDirection: \"right\",\n                yDirection: \"bottom\",\n                x: mItem.x + mItem.width - (mItem.borderWidth ?? 0),\n                y: mItem.y + mItem.height - (mItem.borderWidth ?? 0)\n              });\n            }\n          if (old_mItem && old_mItem._mitem_state.DisplayName_TextRenderer) {\n            old_mItem._mitem_state.DisplayName_TextRenderer.destroy();\n            old_mItem._mitem_state.DisplayName_TextRenderer = null;\n          }\n        }\n        if (true/*Just a block for displayName*/) {\n          if (old_mItem && mItem.displayName === old_mItem.displayName && isSameDimension && isSameBorderRadius && isSamePosition) {\n            mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer = old_mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer;\n            old_mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer = null;\n          } else\n            if (old_mItem && mItem.displayName === old_mItem.displayName && isSameDimension && isSameBorderRadius && !isSamePosition) {\n              if (old_mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer) {\n                old_mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer.update({\n                  x: mItem.x + mItem.width - (mItem.borderWidth ?? 0),\n                  y: mItem.y + mItem.height - (mItem.borderWidth ?? 0)\n                });\n                mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer = old_mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer;\n                old_mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer = null;\n              }\n            } else {\n              mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer = this.TextRenderer.NewText(mItem.displayName ?? \"\", {\n                maxWidth: mItem.width - (mItem.borderWidth ?? 0 * 2) - 20,\n                maxLine: 1,\n                fontSize: 12,\n                fontWeight: \"bold\",\n                textColor: [0.9, 0.9, 0.9, 1],\n                backgroundColor: [0, 0, 0, 0.6],\n                padding: [5, 10],\n                borderRadius: [0, 0, mItem.borderRadius, 0],\n                xDirection: \"right\",\n                yDirection: \"bottom\",\n                x: mItem.x + mItem.width - (mItem.borderWidth ?? 0),\n                y: mItem.y + mItem.height - (mItem.borderWidth ?? 0),\n                icon: {\n                  iconURL: mutedMicImageURL,\n                  iconCacheID: mutedMicImageURL,\n                  placeIcon: \"right\",\n                  fromTextToIconPadding: 10,\n                  width: 15,\n                  height: 20,\n                }\n              });\n            }\n          if (old_mItem && old_mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer) {\n            old_mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer.destroy();\n            old_mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer = null;\n          }\n        }\n        this._initVideoReconnecting(mItem, { isNewUpdate: true, old_mergeItem: old_mItem });\n        newItemsToMergerList.push(mItem);\n      } else if (itemProp.type === \"text\") {\n\n        const mItem = {\n          type: itemProp.type,\n          id: itemProp.id,\n          text: itemProp.text,\n          floatingText: itemProp.floatingText,\n          maxWidth: itemProp.maxWidth,\n          maxLine: itemProp.maxLine,\n          fontSize: itemProp.fontSize,\n          fontWeight: itemProp.fontWeight,\n          textColor: itemProp.textColor,\n          backgroundColor: itemProp.backgroundColor,\n          padding: itemProp.padding,\n          borderRadius: itemProp.borderRadius,\n          xDirection: itemProp.xDirection,\n          yDirection: itemProp.yDirection,\n          x: itemProp.x,\n          y: itemProp.y,\n          hyphenateWord: itemProp.hyphenateWord,\n          compactText: itemProp.compactText,\n          icon: itemProp.icon,\n          _mitem_state: {\n            TextItemRenderer: null\n          }\n        }\n\n        let isSameAsOld = false;\n\n        if (old_mItem && old_mItem.type === \"text\") {\n          delete oldItemsToMergerListAsMap[itemProp.id];\n          if (this._compareObjectsProperties(old_mItem, mItem, [\n            {\n              sameKeys: [\n                \"text\", \"floatingText\",\n                \"maxWidth\", \"maxLine\",\n                \"fontSize\", \"fontWeight\", \"textColor\", \"backgroundColor\",\n                \"padding\", \"borderRadius\",\n                \"xDirection\",\n                \"yDirection\",\n                \"x\", \"y\",\n                \"hyphenateWord\", \"compactText\",\n                \"icon\"\n              ]\n            },\n          ])) {\n            isSameAsOld = true;\n          }\n        } else {\n          old_mItem = null;\n        }\n\n        if (isSameAsOld) {\n          mItem._mitem_state.TextItemRenderer = old_mItem._mitem_state.TextItemRenderer;\n          old_mItem._mitem_state.TextItemRenderer = null;\n        } else {\n          mItem._mitem_state.TextItemRenderer = this.TextRenderer.NewText(mItem.text, {\n            floatingText: mItem.floatingText,\n            maxWidth: mItem.maxWidth,\n            maxLine: mItem.maxLine,\n            fontSize: mItem.fontSize,\n            fontWeight: mItem.fontWeight,\n            textColor: mItem.textColor,\n            backgroundColor: mItem.backgroundColor,\n            padding: mItem.padding,\n            borderRadius: mItem.borderRadius,\n            xDirection: mItem.xDirection,\n            yDirection: mItem.yDirection,\n            x: mItem.x,\n            y: mItem.y,\n            hyphenateWord: mItem.hyphenateWord,\n            compactText: mItem.compactText,\n            icon: mItem.icon,\n          });\n        }\n        newItemsToMergerList.push(mItem);\n      }\n    }\n    if (updateItemsOnly) {\n      const newItems = {};\n      for (const newItem of newItemsToMergerList) {\n        newItems[newItem.id] = newItem;\n      }\n      for (const index in this.itemsToMergerList) {\n        const oldItem = this.itemsToMergerList[index];\n        if (!newItems[oldItem.id]) continue;\n        //Replace the old item with the new updated item.\n        this.itemsToMergerList[index] = newItems[oldItem.id];\n      }\n    } else {\n      this.itemsToMergerList = newItemsToMergerList;\n    }\n    this._resetAudioTracks(newItemsToMergerList, updateItemsOnly);\n    for (const k in oldItemsToMergerListAsMap) {\n      const old_mItem = oldItemsToMergerListAsMap[k];\n      if (!old_mItem) continue;\n      if (old_mItem.type === \"video\") {\n        this._removeEventFromVideo(old_mItem);\n        if (old_mItem._mitem_state.Avatar_ImageRenderer) {\n          old_mItem._mitem_state.Avatar_ImageRenderer.destroy(old_mItem.avatarURL === defaultAvatarURL ? false : true);\n        }\n        if (old_mItem._mitem_state.DisplayName_TextRenderer) {\n          old_mItem._mitem_state.DisplayName_TextRenderer.destroy();\n        }\n        if (old_mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer) {\n          old_mItem._mitem_state.DisplayName_WithMutedMic_TextRenderer.destroy();\n        }\n        if (old_mItem._mitem_state.Reconnecting_ImageRenderer) {\n          old_mItem._mitem_state.Reconnecting_ImageRenderer.destroy(old_mItem.reconnectingAvatarURL === defaultReconnectingAvatarURL ? false : true);\n        }\n      }\n    }\n  }\n  _addEventToVideo(mItem) {\n    if (mItem.type !== \"video\") return;\n    const hasVideoTrack = () => {\n      let hasVideoTrack = true;\n      if (mItem.videoElement.srcObject && !mItem.videoElement.srcObject.getVideoTracks().length) {\n        hasVideoTrack = false;\n      }\n      return hasVideoTrack;\n    }\n    mItem._mitem_state._VideoCanplayEventCb = () => {\n      if (hasVideoTrack()) {\n        mItem.isVideoReady = true;\n      } else {\n        mItem.isVideoReady = false;\n      }\n    }\n    mItem.videoElement.addEventListener('canplay', mItem._mitem_state._VideoCanplayEventCb);\n    if (mItem.videoElement.readyState >= 1) {\n      mItem._mitem_state._VideoCanplayEventCb();\n    }\n  }\n  _removeEventFromVideo(mItem) {\n    if (mItem.type !== \"video\") return;\n    mItem.videoElement.removeEventListener('canplay', mItem._mitem_state._VideoCanplayEventCb);\n    mItem._mitem_state._VideoCanplayEventCb = null;\n  }\n  _updateExistingItems(frameItems) {\n    this._resetFrame(frameItems, true);\n  }\n  _softUpdateVideoFrameItem(itemID, {\n    objectFit,\n    renderVideo,\n    renderAudio,\n    cameraDisabled,\n    audioDisabled,\n    isWaiting,\n    isReconnecting,\n    backgroundColor,\n    borderColor,\n    innerBorderColor\n  }) {\n    let foundTheItemIn = false;\n    for (const mItem of this.itemsToMergerList) {\n      if (mItem.id !== itemID) continue;\n      if (mItem.type !== \"video\") {\n        this.console.warn(`The video id \"${itemID}\" does not match the existing video type!`);\n        return;\n      }\n      let canUpdateAudio = false;\n      if (objectFit !== undefined) {\n        mItem.objectFit = objectFit;\n      }\n      if (renderVideo !== undefined) {\n        mItem.renderVideo = renderVideo;\n      }\n      if (renderAudio !== undefined) {\n        canUpdateAudio = true;\n        mItem.renderAudio = renderAudio;\n      }\n      if (cameraDisabled !== undefined) {\n        mItem.cameraDisabled = cameraDisabled;\n      }\n      if (audioDisabled !== undefined) {\n        canUpdateAudio = true;\n        mItem.audioDisabled = audioDisabled;\n      }\n      if (isWaiting !== undefined) {\n        mItem.isWaiting = isWaiting;\n      }\n      if (isReconnecting !== undefined) {\n        mItem.isReconnecting = isReconnecting;\n      }\n      if (backgroundColor !== undefined) {\n        mItem.backgroundColor = backgroundColor;\n      }\n      if (borderColor !== undefined) {\n        mItem.borderColor = borderColor;\n      }\n      if (innerBorderColor !== undefined && mItem.innerBorder) {\n        mItem.innerBorder.borderColor = innerBorderColor;\n      }\n      if (canUpdateAudio) {\n        this._resetAudioTracks([mItem], true);\n      }\n      foundTheItemIn = true;\n      break;\n    }\n    if (!foundTheItemIn) {\n      this.console.warn(`No video item with id \"${itemID}\" matches any of the existing videos!`)\n    }\n  }\n  _initVideoReconnecting(mergeItem, { isNewUpdate, old_mergeItem } = {}) {\n    if (isNewUpdate) {\n      if (!old_mergeItem || old_mergeItem.type !== \"video\") return;\n      if (mergeItem.reconnectingAvatarURL !== old_mergeItem.reconnectingAvatarURL) {\n        if (old_mergeItem._mitem_state.Reconnecting_ImageRenderer) {\n          old_mergeItem._mitem_state.Reconnecting_ImageRenderer.destroy(old_mergeItem.reconnectingAvatarURL === defaultReconnectingAvatarURL ? false : true);\n          old_mergeItem._mitem_state.Reconnecting_ImageRenderer = null;\n        }\n        if (!mergeItem.isReconnecting) return;\n      }\n    }\n    if (!isNewUpdate) {\n      if (mergeItem.type !== \"video\" || mergeItem._mitem_state.Reconnecting_ImageRenderer) return;\n    }\n    const reconnectingAvatarURL = mergeItem.reconnectingAvatarURL;\n    let newLeft = mergeItem.x;\n    let newTop = mergeItem.y;\n    let newWidth = mergeItem.width;\n    let newHeight = mergeItem.height;\n    let newBorderRadius = mergeItem.borderRadius;\n    if (mergeItem.borderWidth || (mergeItem.innerBorder && mergeItem.innerBorder.borderWidth)) {\n      if (newBorderRadius) {\n        newBorderRadius += 2;//u_edgeSoftness\n      }\n      if (newBorderRadius && !mergeItem.borderWidth && mergeItem.innerBorder && mergeItem.innerBorder.borderWidth) {\n        const uEdgeSoftnessNoise = 2;\n        newWidth -= uEdgeSoftnessNoise;\n        newHeight -= uEdgeSoftnessNoise;\n        newLeft += uEdgeSoftnessNoise / 2;\n        newTop += uEdgeSoftnessNoise / 2;\n        newBorderRadius -= uEdgeSoftnessNoise;\n      }\n      let borderSoftnessBoundary = 0;\n      if (mergeItem.borderWidth) {\n        if (mergeItem.borderSoftness) {\n          borderSoftnessBoundary = (mergeItem.borderSoftness / 2);\n          newWidth -= borderSoftnessBoundary;\n          newHeight -= borderSoftnessBoundary;\n          newLeft += borderSoftnessBoundary / 2;\n          newTop += borderSoftnessBoundary / 2;\n        }\n        newLeft += mergeItem.borderWidth;\n        newTop += mergeItem.borderWidth;\n        newWidth -= mergeItem.borderWidth * 2;\n        newHeight -= mergeItem.borderWidth * 2;\n        if (newBorderRadius) {\n          newBorderRadius -= mergeItem.borderWidth;\n        }\n      }\n    }\n\n    if (isNewUpdate && old_mergeItem._mitem_state.Reconnecting_ImageRenderer) {\n      old_mergeItem._mitem_state.Reconnecting_ImageRenderer.update({\n        width: newWidth,\n        height: newHeight,\n        x: newLeft,\n        y: newTop,\n        borderRadius: newBorderRadius\n      });\n      mergeItem._mitem_state.Reconnecting_ImageRenderer = old_mergeItem._mitem_state.Reconnecting_ImageRenderer;\n      old_mergeItem._mitem_state.Reconnecting_ImageRenderer = null;\n    } else {\n      mergeItem._mitem_state.Reconnecting_ImageRenderer = this.ImageRenderer.NewImageFromURLs([\n        {\n          URL: reconnectingAvatarURL,\n          cacheID: reconnectingAvatarURL\n        }],\n        {\n          width: newWidth,\n          height: newHeight,\n          x: newLeft,\n          y: newTop,\n          objectFit: \"cover\",\n          borderRadius: newBorderRadius,\n          borderSoftness: 0\n        });\n    }\n  }\n  _stopDrawing() {\n    this.AnimationFrameRunner.stop();\n    this.isDrawing = false;\n  }\n  async _startDrawing() {\n    if (this.destroyed) {\n      throw VCVRDError.NewErrorFromEnumItem(VCVRDEnum.vcVideosRenderer_already_destroyed);\n    }\n    if (this.isDrawing) {\n      throw VCVRDError.NewErrorFromEnumItem(VCVRDEnum.drawing_already_progress);\n    }\n    this._initMediaAudio();\n    const fps = this.frameRate;\n    this.isDrawing = true;\n    this.AnimationFrameRunner.start(()=>this._render(), fps);\n  }\n\n  _resetAudioTracks(list, updateItemsOnly) {\n    if (!this.MediaAudio) return;\n\n    const oldAudioItemsToMergerListAsMap = {};\n    for (const old_mItem of this.audioItemsToMergerList) {\n      if (updateItemsOnly) {\n        for (const itemProp of list) {\n          if (itemProp.id !== old_mItem.id) continue;\n          oldAudioItemsToMergerListAsMap[old_mItem.id] = old_mItem;\n          break;\n        }\n      } else {\n        oldAudioItemsToMergerListAsMap[old_mItem.id] = old_mItem;\n      }\n    }\n\n    const newaudioItemsToMergerList = [];\n\n    for (const i in list) {\n      const itemProp = list[i];\n      let old_mItem = oldAudioItemsToMergerListAsMap[itemProp.id];\n      if (updateItemsOnly && !old_mItem) {\n        continue;\n      }\n      if (itemProp.type === \"video\") {\n        const mItem = {\n          type: itemProp.type,\n          id: itemProp.id,\n          videoElement: itemProp.videoElement,\n          renderAudio: itemProp.renderAudio,\n          audioDisabled: itemProp.audioDisabled,\n          _mitem_state: {\n            capturedStream: null,\n            sourceProp: null,\n            MixedAudioMediaStreamGainNode: null,\n            MixedAudioMediaStreamSourceNode: null\n          }\n        }\n        if (old_mItem && old_mItem.type === \"video\") {\n          delete oldAudioItemsToMergerListAsMap[itemProp.id];\n        } else {\n          old_mItem = null;\n        }\n\n        let itemNewMediaStream = null;\n        if (mItem.videoElement.srcObject) {\n          itemNewMediaStream = mItem.videoElement.srcObject;\n        } else if (old_mItem && old_mItem.videoElement === mItem.videoElement\n          && old_mItem._mitem_state.sourceProp\n          && old_mItem._mitem_state.capturedStream) {\n          itemNewMediaStream = old_mItem._mitem_state.capturedStream;\n          mItem._mitem_state.capturedStream = itemNewMediaStream;\n        } else if (!old_mItem || (old_mItem && old_mItem.videoElement !== mItem.videoElement)) {\n          //We have to check it if the old video element is same with current in case it failed at first entry from faulty device, so no\n          //to retry again.\n          try {\n            itemNewMediaStream = new CaptureMediaStreamFromMediaElement(mItem.videoElement, [\"audio\"]);\n            mItem._mitem_state.capturedStream = itemNewMediaStream;\n          } catch (er) {\n            this.console.warn(\"Error capturing MediaStream videoElement!\", er)\n          }\n        }\n\n        if (old_mItem && old_mItem._mitem_state.sourceProp) {\n          if (itemNewMediaStream && old_mItem._mitem_state.sourceProp.fromMediaStream) {\n            mItem._mitem_state.MixedAudioMediaStreamSourceNode = old_mItem._mitem_state.MixedAudioMediaStreamSourceNode;\n            mItem._mitem_state.MixedAudioMediaStreamGainNode = old_mItem._mitem_state.MixedAudioMediaStreamGainNode;\n            mItem._mitem_state.sourceProp = old_mItem._mitem_state.sourceProp;\n            mItem._mitem_state.fromMediaStream = old_mItem._mitem_state.fromMediaStream;\n\n            mItem._mitem_state.sourceProp.fromMediaStream.mixedAudioMediaStream.getTracks().forEach((oldTrack) => {\n              let foundAudioTrackIn = false;\n              for (const newTrack of itemNewMediaStream.getTracks()) {\n                if (oldTrack === newTrack && newTrack.kind === 'audio') {\n                  foundAudioTrackIn = true;\n                  break;\n                }\n              }\n              if (!foundAudioTrackIn) {\n                mItem._mitem_state.sourceProp.fromMediaStream.mixedAudioMediaStream.removeTrack(oldTrack);\n              }\n            });\n\n            mItem._mitem_state.sourceProp.fromMediaStream.hasAudioTrack = false;\n            itemNewMediaStream.getTracks().forEach((newTrack) => {\n              if (newTrack.kind !== 'audio') return;\n              mItem._mitem_state.sourceProp.fromMediaStream.hasAudioTrack = true;\n              let foundAudioTrackIn = false;\n              for (const oldTrack of mItem._mitem_state.sourceProp.fromMediaStream.mixedAudioMediaStream.getTracks()) {\n                if (oldTrack === newTrack) {\n                  foundAudioTrackIn = true;\n                  break;\n                }\n              }\n              if (!foundAudioTrackIn) {\n                mItem._mitem_state.sourceProp.fromMediaStream.mixedAudioMediaStream.addTrack(newTrack);\n              }\n            });\n            if (old_mItem._mitem_state.capturedStream &&\n              itemNewMediaStream !== old_mItem._mitem_state.capturedStream) {\n              old_mItem._mitem_state.capturedStream.stop();\n            }\n          } else {\n            this._disconnectAudio(old_mItem);\n          }\n        }\n\n\n\n        if (!mItem._mitem_state.sourceProp && itemNewMediaStream) {\n          mItem._mitem_state.sourceProp = {\n            fromMediaStream: {\n              hasAudioTrack: false,\n              mixedAudioMediaStream: new MediaStream()\n            }\n          };\n          itemNewMediaStream.getTracks().filter(function (t) {\n            return t.kind === 'audio';\n          }).forEach((track) => {\n            mItem._mitem_state.sourceProp.fromMediaStream.hasAudioTrack = true;\n            mItem._mitem_state.sourceProp.fromMediaStream.mixedAudioMediaStream.addTrack(track);\n          });\n\n\n          if (mItem._mitem_state.sourceProp.fromMediaStream.hasAudioTrack) {\n            try {\n              mItem._mitem_state.MixedAudioMediaStreamSourceNode = this.MediaAudio.audioContext.createMediaStreamSource(mItem._mitem_state.sourceProp.fromMediaStream.mixedAudioMediaStream);\n              mItem._mitem_state.MixedAudioMediaStreamGainNode = this.MediaAudio.audioContext.createGain();\n\n              mItem._mitem_state.MixedAudioMediaStreamGainNode.gain.value = 1;\n\n              mItem._mitem_state.MixedAudioMediaStreamSourceNode.connect(mItem._mitem_state.MixedAudioMediaStreamGainNode);\n              mItem._mitem_state.MixedAudioMediaStreamGainNode.connect(this.MediaAudio.mixerGain);\n            } catch (er) {\n              this.console.warn(\"Failed creating audioContext sourceNode.\", er);\n            }\n          }\n\n        }\n        newaudioItemsToMergerList.push(mItem);\n      }\n    }\n\n    if (updateItemsOnly) {\n      const newItems = {};\n      for (const newItem of newaudioItemsToMergerList) {\n        newItems[newItem.id] = newItem;\n      }\n      for (const index in this.audioItemsToMergerList) {\n        const oldItem = this.audioItemsToMergerList[index];\n        if (!newItems[oldItem.id]) continue;\n        //Replace the old item with the new updated item.\n        this.audioItemsToMergerList[index] = newItems[oldItem.id];\n      }\n    } else {\n      this.audioItemsToMergerList = newaudioItemsToMergerList;\n    }\n\n    for (const k in oldAudioItemsToMergerListAsMap) {\n      const old_mItem = oldAudioItemsToMergerListAsMap[k];\n      if (!old_mItem) return;\n      this._disconnectAudio(old_mItem);\n    }\n\n  }\n  _disconnectAudio(mItem) {\n    if (!mItem || mItem.type !== \"video\") return;\n    if (mItem._mitem_state.capturedStream) {\n      this.console.log(\"capturedStream\",mItem._mitem_state.capturedStream)\n      mItem._mitem_state.capturedStream.stop();\n    }\n    if (mItem._mitem_state.MixedAudioMediaStreamSourceNode) {\n      try {\n        mItem._mitem_state.MixedAudioMediaStreamGainNode.disconnect(this.MediaAudio.mixerGain);\n        mItem._mitem_state.MixedAudioMediaStreamSourceNode.disconnect(mItem._mitem_state.MixedAudioMediaStreamGainNode);\n      } catch (er) {\n        this.console.warn(er)\n      }\n    }\n  }\n  _initMediaAudio() {\n    if (this.MediaAudio) return;\n    this.MediaAudio = {\n      audioContext: new AudioContext(),\n      mixerGain: null,\n      destination: null\n    }\n    // Mixer node to mix the audio tracks.\n    this.MediaAudio.mixerGain = this.MediaAudio.audioContext.createGain();\n\n    // Destination node to capture the mixed audio.\n    this.MediaAudio.destination = this.MediaAudio.audioContext.createMediaStreamDestination();\n    this.MediaAudio.mixerGain.connect(this.MediaAudio.destination);\n\n    this.MediaAudio.audioContext.resume();\n    this.MediaStreamTrackAudio = this.MediaAudio.destination.stream.getAudioTracks()[0];\n    this.MediaStream.addTrack(this.MediaStreamTrackAudio);\n\n    this._resetAudioTracks(this.itemsToMergerList);\n  }\n\n  _initWebGL() {\n    this.gl = this.canvas.getContext('webgl2', { alpha: false });\n    if (!this.gl) {\n      throw VCVRDError.NewErrorFromEnumItem(VCVRDEnum.unsupported_webgl);\n    }\n\n    this.MediaStream = this.canvas.captureStream();\n    this.MediaStreamTrackVideo = this.MediaStream.getVideoTracks()[0];\n\n    this.ImageRenderer = this.GetExtension(\"ImageRenderer\").New();\n    this.TextRenderer = this.GetExtension(\"TextRenderer\").New();\n    this.shaders = {\n      kinds: {}\n    };\n    this.gl.enable(this.gl.BLEND);\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\n    // Create and compile shaders for image:\n    const imageShaderProgram = vcVideosRendererCore.createImageShaderProgram(this.gl);\n\n    // Set viewport:\n    const dprX = Math.floor((this.canvas.width - this.canvas.width * window.devicePixelRatio) / 2);\n    const dprY = Math.floor((this.canvas.height - this.canvas.height * window.devicePixelRatio) / 2);\n    this.gl.viewport(dprX, dprY, this.canvas.width * window.devicePixelRatio, this.canvas.height * window.devicePixelRatio);\n\n    // Initialize vertex buffer for screen quad:\n    const img_positionVertices = new Float32Array([-1.0, 1.0, 1.0, 1.0, -1.0, -1.0, 1.0, -1.0]);\n    const img_uvVertices = new Float32Array([0.0, 1.0, 1.0, 1.0, 0.0, 0.0, 1.0, 0.0]);\n\n    const img_aVertexPositionLocation = this.gl.getAttribLocation(imageShaderProgram, 'aVertexPosition');\n    const img_aUvLocation = this.gl.getAttribLocation(imageShaderProgram, 'aUv');\n    const img_positionBuffer = createBuffer(this.gl, img_positionVertices, this.gl.ARRAY_BUFFER);\n    const img_uvBuffer = createBuffer(this.gl, img_uvVertices, this.gl.ARRAY_BUFFER);\n    setBufferData(this.gl, img_aVertexPositionLocation, img_positionBuffer);\n    setBufferData(this.gl, img_aUvLocation, img_uvBuffer);\n    const img_uSamplerLocation = this.gl.getUniformLocation(imageShaderProgram, 'uSampler');\n    this.gl.uniform1i(img_uSamplerLocation, 0);\n    // Scale factor uniform:\n    const img_uScaleLocation = this.gl.getUniformLocation(imageShaderProgram, 'uScale');\n    this.gl.uniform4fv(img_uScaleLocation, [1 / window.devicePixelRatio, 1 / window.devicePixelRatio, 0.0, 1.0]);\n    const img_u_resolutionLocation = this.gl.getUniformLocation(imageShaderProgram, 'u_resolution');\n    const img_rect_u_sizeLocation = this.gl.getUniformLocation(imageShaderProgram, 'rect_u_size');\n    const img_rect_u_borderWidthLocation = this.gl.getUniformLocation(imageShaderProgram, 'rect_u_borderWidth');\n    const img_rect_u_borderSoftnessLocation = this.gl.getUniformLocation(imageShaderProgram, 'rect_u_borderSoftness');\n    const img_rect_u_borderRadiusLocation = this.gl.getUniformLocation(imageShaderProgram, 'rect_u_borderRadius');\n    const img_rect_u_borderColorLocation = this.gl.getUniformLocation(imageShaderProgram, 'rect_u_borderColor');\n    const img_rect_u_locationLocation = this.gl.getUniformLocation(imageShaderProgram, 'rect_u_location');\n\n\n    this.shaders.kinds[\"image\"] =\n    {\n      program: imageShaderProgram,\n      attributes: {\n        rectVertexPosition: img_aVertexPositionLocation,\n      },\n      uniforms: {\n        u_resolution: img_u_resolutionLocation,\n        rect_u_size: img_rect_u_sizeLocation,\n        rect_u_borderWidth: img_rect_u_borderWidthLocation,\n        rect_u_borderSoftness: img_rect_u_borderSoftnessLocation,\n        rect_u_borderRadius: img_rect_u_borderRadiusLocation,\n        rect_u_borderColor: img_rect_u_borderColorLocation,\n        rect_u_location: img_rect_u_locationLocation,\n      }\n    };\n\n    this.shaders.kinds[\"video\"] =\n    {\n      program: imageShaderProgram,\n      attributes: {\n        rectVertexPosition: img_aVertexPositionLocation,\n      },\n      uniforms: {\n        u_resolution: img_u_resolutionLocation,\n        rect_u_size: img_rect_u_sizeLocation,\n        rect_u_borderWidth: img_rect_u_borderWidthLocation,\n        rect_u_borderSoftness: img_rect_u_borderSoftnessLocation,\n        rect_u_borderRadius: img_rect_u_borderRadiusLocation,\n        rect_u_borderColor: img_rect_u_borderColorLocation,\n        rect_u_location: img_rect_u_locationLocation,\n      }\n    };\n\n    // Create and compile separate shader program for backgrounds/borders:\n    const borderProgram = vcVideosRendererCore.createBorderShaderProgram(this.gl);\n    const border_rect_uScaleLocation = this.gl.getUniformLocation(borderProgram, 'uScale');\n    this.gl.uniform4fv(border_rect_uScaleLocation, [1 / window.devicePixelRatio, 1 / window.devicePixelRatio, 0.0, 1.0]);\n    const border_rect_rectVertexPositionLocation = this.gl.getAttribLocation(borderProgram, 'rectVertexPosition');\n    const border_u_resolutionLocation = this.gl.getUniformLocation(borderProgram, 'u_resolution');\n    const border_rect_u_sizeLocation = this.gl.getUniformLocation(borderProgram, 'rect_u_size');\n    const border_rect_u_borderWidthLocation = this.gl.getUniformLocation(borderProgram, 'rect_u_borderWidth');\n    const border_rect_u_borderSoftnessLocation = this.gl.getUniformLocation(borderProgram, 'rect_u_borderSoftness');\n    const border_rect_u_borderRadiusLocation = this.gl.getUniformLocation(borderProgram, 'rect_u_borderRadius');\n    const border_rect_u_backgroundColorLocation = this.gl.getUniformLocation(borderProgram, 'rect_u_backgroundColor');\n    const border_rect_u_borderColorLocation = this.gl.getUniformLocation(borderProgram, 'rect_u_borderColor');\n    const border_rect_u_locationLocation = this.gl.getUniformLocation(borderProgram, 'rect_u_location');\n    this.shaders.kinds[\"border\"] = {\n      program: borderProgram,\n      attributes: {\n        rectVertexPosition: border_rect_rectVertexPositionLocation,\n      },\n      uniforms: {\n        u_resolution: border_u_resolutionLocation,\n        rect_u_size: border_rect_u_sizeLocation,\n        rect_u_borderWidth: border_rect_u_borderWidthLocation,\n        rect_u_borderSoftness: border_rect_u_borderSoftnessLocation,\n        rect_u_borderRadius: border_rect_u_borderRadiusLocation,\n        rect_u_backgroundColor: border_rect_u_backgroundColorLocation,\n        rect_u_borderColor: border_rect_u_borderColorLocation,\n        rect_u_location: border_rect_u_locationLocation,\n      }\n    };\n  }\n\n  _render() {\n    this.gl.clearColor(0.0, 0.0, 0.0, 1.0);\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n\n    // Draw each video using separate textures:\n    for (const mergeItem of this.itemsToMergerList) {\n      if (mergeItem.type === \"video\") {\n        if (!mergeItem.renderVideo) continue;\n        this._drawVideoBackgroundsAndBorders(mergeItem, false);\n        if (mergeItem.cameraDisabled) {\n          //Render avatar instead if camera disabled.\n          if (mergeItem._mitem_state.Avatar_ImageRenderer) {\n            mergeItem._mitem_state.Avatar_ImageRenderer.render();\n          }\n        } else if (mergeItem.isVideoReady && (!mergeItem.isReconnecting || !mergeItem._mitem_state.Reconnecting_ImageRenderer || !mergeItem._mitem_state.Reconnecting_ImageRenderer.isItReady())) {\n          const videoElement = mergeItem.videoElement;\n          const videoTexture = mergeItem._mitem_state.videoTexture;\n          this.gl.useProgram(this.shaders.kinds.video.program);\n          // Update texture with video frame:\n          this.gl.bindTexture(this.gl.TEXTURE_2D, videoTexture);\n          this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, 1);\n          this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGB, this.gl.RGB, this.gl.UNSIGNED_BYTE, videoElement);\n\n          // Bind video-specific vertex buffer:\n          const positionBuffer = createBuffer(\n            this.gl,\n            calculateVerticesPosition(this.canvas, {\n              x: mergeItem.x,\n              y: mergeItem.y,\n              objectFit: mergeItem.objectFit,\n              width: mergeItem.width,\n              height: mergeItem.height,\n              borderWidth: mergeItem.borderWidth,\n              imageWidth: mergeItem.videoElement.videoWidth,\n              imageHeight: mergeItem.videoElement.videoHeight\n            }),\n            this.gl.ARRAY_BUFFER);\n          setBufferData(this.gl, this.shaders.kinds.video.attributes.rectVertexPosition, positionBuffer);\n\n          this.gl.uniform2fv(this.shaders.kinds.video.uniforms.u_resolution, [this.canvas.width, this.canvas.height]);\n\n          if (mergeItem.borderWidth || (mergeItem.innerBorder && mergeItem.innerBorder.borderWidth)) {\n            let newLeft = mergeItem.x;\n            let newTop = mergeItem.y;\n            let newWidth = mergeItem.width;\n            let newHeight = mergeItem.height;\n            let newBorderRadius = mergeItem.borderRadius;\n            if (newBorderRadius) {\n              newBorderRadius += 2;//u_edgeSoftness\n            }\n            if (newBorderRadius && !mergeItem.borderWidth && mergeItem.innerBorder && mergeItem.innerBorder.borderWidth) {\n              const uEdgeSoftnessNoise = 2;\n              newWidth -= uEdgeSoftnessNoise;\n              newHeight -= uEdgeSoftnessNoise;\n              newLeft += uEdgeSoftnessNoise / 2;\n              newTop += uEdgeSoftnessNoise / 2;\n              newBorderRadius -= uEdgeSoftnessNoise;\n            }\n            let borderSoftnessBoundary = 0;\n            if (mergeItem.borderWidth) {\n              if (mergeItem.borderSoftness) {\n                borderSoftnessBoundary = (mergeItem.borderSoftness / 2);\n                newWidth -= borderSoftnessBoundary;\n                newHeight -= borderSoftnessBoundary;\n                newLeft += borderSoftnessBoundary / 2;\n                newTop += borderSoftnessBoundary / 2;\n              }\n              newLeft += mergeItem.borderWidth;\n              newTop += mergeItem.borderWidth;\n              newWidth -= mergeItem.borderWidth * 2;\n              newHeight -= mergeItem.borderWidth * 2;\n              if (newBorderRadius) {\n                newBorderRadius -= mergeItem.borderWidth;\n              }\n            }\n            this.gl.uniform2fv(this.shaders.kinds.video.uniforms.rect_u_size, [newWidth, newHeight]);\n            this.gl.uniform2fv(this.shaders.kinds.video.uniforms.rect_u_location, [newLeft, newTop]);\n            this.gl.uniform1f(this.shaders.kinds.video.uniforms.rect_u_borderWidth, 0);\n            this.gl.uniform1f(this.shaders.kinds.video.uniforms.rect_u_borderSoftness, 0);\n            this.gl.uniform4fv(this.shaders.kinds.video.uniforms.rect_u_borderColor, [0.0, 0.0, 0.0, 0.0]);\n            this.gl.uniform4fv(this.shaders.kinds.video.uniforms.rect_u_borderRadius, [newBorderRadius, newBorderRadius, newBorderRadius, newBorderRadius]);\n          } else {\n            this.gl.uniform2fv(this.shaders.kinds.video.uniforms.rect_u_size, [mergeItem.width, mergeItem.height]);\n            this.gl.uniform2fv(this.shaders.kinds.video.uniforms.rect_u_location, [mergeItem.x, mergeItem.y]);\n            this.gl.uniform1f(this.shaders.kinds.video.uniforms.rect_u_borderWidth, 0);\n            this.gl.uniform1f(this.shaders.kinds.video.uniforms.rect_u_borderSoftness, mergeItem.borderSoftness);\n            this.gl.uniform4fv(this.shaders.kinds.video.uniforms.rect_u_borderColor, [0.0, 0.0, 0.0, 0.0]);\n            this.gl.uniform4fv(this.shaders.kinds.video.uniforms.rect_u_borderRadius, [mergeItem.borderRadius, mergeItem.borderRadius, mergeItem.borderRadius, mergeItem.borderRadius]);\n          }\n\n          // Apply overflow hidden using scissor to prevent scaling outside the specified width and height, \n          // when the image is scale to cover:\n          //this.gl.enable(this.gl.SCISSOR_TEST);\n          //this.gl.scissor(mergeItem.x, canvas.height - mergeItem.y - mergeItem.height, mergeItem.width, mergeItem.height);\n          // Draw the video quad:\n          this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\n          //this.gl.disable(this.gl.SCISSOR_TEST);\n\n        }\n\n\n        if (mergeItem.isReconnecting && !mergeItem._mitem_state.Reconnecting_ImageRenderer) {\n          this._initVideoReconnecting(mergeItem);\n        }\n\n        if (!mergeItem.cameraDisabled && mergeItem.isReconnecting && mergeItem._mitem_state.Reconnecting_ImageRenderer) {\n          mergeItem._mitem_state.Reconnecting_ImageRenderer.render();\n        }\n\n        if (mergeItem.audioDisabled) {\n          if (mergeItem._mitem_state.DisplayName_WithMutedMic_TextRenderer) {\n            //Render video display name with muted mic icon.\n            mergeItem._mitem_state.DisplayName_WithMutedMic_TextRenderer.render();\n          }\n        } else {\n          if (mergeItem._mitem_state.DisplayName_TextRenderer) {\n            //Render video display name.\n            mergeItem._mitem_state.DisplayName_TextRenderer.render();\n          }\n        }\n\n        if (mergeItem.isWaiting || mergeItem.isReconnecting) {\n          this.waiting_animation_ImageRenderer.update({\n            width: mergeItem.waitingDimension.width,\n            height: mergeItem.waitingDimension.height,\n            x: mergeItem.waitingDimension.x,\n            y: mergeItem.waitingDimension.y,\n          });\n          this.waiting_animation_ImageRenderer.render({\n            gifGroupName: mergeItem.id,\n            gifSessionKey: mergeItem.waitingDimension.sessionKey,\n            gifRandomizeInitialization: true\n          });\n        }\n\n        this._drawVideoBackgroundsAndBorders(mergeItem, true);\n      } else if (mergeItem.type === \"text\") {\n        if (mergeItem._mitem_state.TextItemRenderer) {\n          mergeItem._mitem_state.TextItemRenderer.render();\n        }\n      }\n    }\n  }\n  _drawVideoBackgroundsAndBorders(videoInfo, isInner) {\n    if (isInner) {\n      if (!videoInfo.innerBorder || !videoInfo.innerBorder.borderWidth || !videoInfo.innerBorder.borderColor) return;\n      this.drawRectBackgroundsAndBorders({\n        width: videoInfo.width, height: videoInfo.height, x: videoInfo.x, y: videoInfo.y,\n        parentBorderWidth: videoInfo.borderWidth,\n        borderWidth: videoInfo.innerBorder.borderWidth,\n        borderColor: videoInfo.innerBorder.borderColor,\n        backgroundColor: [0.0, 0.0, 0.0, 0.0],\n        borderRadius: videoInfo.borderRadius,\n        borderSoftness: videoInfo.borderSoftness\n      }, true);\n    } else {\n      this.drawRectBackgroundsAndBorders({\n        width: videoInfo.width, height: videoInfo.height, x: videoInfo.x, y: videoInfo.y,\n        borderWidth: videoInfo.borderWidth,\n        borderColor: videoInfo.borderColor,\n        backgroundColor: videoInfo.backgroundColor,\n        borderRadius: videoInfo.borderRadius,\n        borderSoftness: videoInfo.borderSoftness\n      }, false);\n    }\n  }\n\n\n  drawRectBackgroundsAndBorders({\n    width, height, x, y, parentBorderWidth, borderWidth, borderColor, backgroundColor, borderRadius, borderSoftness\n  }, isInner) {\n\n    if (isInner) {\n      let newLeft = x;\n      let newTop = y;\n      let newWidth = width;\n      let newHeight = height;\n      let newBorderRadius = borderRadius;\n\n\n      let borderSoftnessBoundary = 0;\n      if (parentBorderWidth) {\n        if (borderSoftness) {\n          borderSoftnessBoundary = (borderSoftness / 2);\n          newWidth += borderSoftnessBoundary;\n          newHeight += borderSoftnessBoundary;\n          newLeft -= borderSoftnessBoundary / 2;\n          newTop -= borderSoftnessBoundary / 2;\n        }\n        newLeft += parentBorderWidth;\n        newTop += parentBorderWidth;\n        newWidth -= parentBorderWidth * 2;\n        newHeight -= parentBorderWidth * 2;\n        if (newBorderRadius) {\n          newBorderRadius -= parentBorderWidth;\n        }\n      }\n\n      const rectVertices = createRectVertices(this.canvas, {\n        x: newLeft, y: newTop,\n        width: newWidth,\n        height: newHeight,\n        borderWidth: parentBorderWidth\n      });\n\n      const rectBuffer = createBuffer(this.gl, rectVertices, this.gl.ARRAY_BUFFER);\n      setBufferData(this.gl, this.shaders.kinds.border.attributes.rectVertexPosition, rectBuffer);\n\n\n      this.gl.useProgram(this.shaders.kinds.border.program);\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, rectBuffer);\n      this.gl.uniform2fv(this.shaders.kinds.border.uniforms.u_resolution, [this.canvas.width, this.canvas.height]);\n      this.gl.uniform2fv(this.shaders.kinds.border.uniforms.rect_u_size, [newWidth, newHeight]);\n      this.gl.uniform1f(this.shaders.kinds.border.uniforms.rect_u_borderWidth, borderWidth);\n      this.gl.uniform1f(this.shaders.kinds.border.uniforms.rect_u_borderSoftness, borderSoftness);\n      this.gl.uniform4fv(this.shaders.kinds.border.uniforms.rect_u_borderRadius, [newBorderRadius, newBorderRadius, newBorderRadius, newBorderRadius]);\n      this.gl.uniform4fv(this.shaders.kinds.border.uniforms.rect_u_backgroundColor, [0.0, 0.0, 0.0, 0.0]);\n      this.gl.uniform4fv(this.shaders.kinds.border.uniforms.rect_u_borderColor, borderColor);\n      this.gl.uniform2fv(this.shaders.kinds.border.uniforms.rect_u_location, [newLeft, newTop]);\n      this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, rectVertices.length / 2);\n    } else {\n      const rectVertices = createRectVertices(this.canvas, {\n        x: x, y: y,\n        width: width,\n        height: height,\n        borderWidth: borderWidth\n      });\n\n      const rectBuffer = createBuffer(this.gl, rectVertices, this.gl.ARRAY_BUFFER);\n      setBufferData(this.gl, this.shaders.kinds.border.attributes.rectVertexPosition, rectBuffer);\n\n      this.gl.useProgram(this.shaders.kinds.border.program);\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, rectBuffer);\n      this.gl.uniform2fv(this.shaders.kinds.border.uniforms.u_resolution, [this.canvas.width, this.canvas.height]);\n      this.gl.uniform2fv(this.shaders.kinds.border.uniforms.rect_u_size, [width, height]);\n      this.gl.uniform1f(this.shaders.kinds.border.uniforms.rect_u_borderWidth, borderWidth);\n      this.gl.uniform1f(this.shaders.kinds.border.uniforms.rect_u_borderSoftness, borderSoftness);\n      this.gl.uniform4fv(this.shaders.kinds.border.uniforms.rect_u_borderRadius, [borderRadius, borderRadius, borderRadius, borderRadius]);\n      this.gl.uniform4fv(this.shaders.kinds.border.uniforms.rect_u_backgroundColor, backgroundColor);\n      this.gl.uniform4fv(this.shaders.kinds.border.uniforms.rect_u_borderColor, borderColor);\n      this.gl.uniform2fv(this.shaders.kinds.border.uniforms.rect_u_location, [x, y]);\n      this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, rectVertices.length / 2);\n    }\n  }\n\n  loadTextureAsset({ cacheID, URL }, callBack/*(texture, err)*/) {\n    if (cacheID || cacheID === 0) {\n      for (const fetching of this._cachedTextures.fetchingCaches) {\n        if (fetching.cacheID === cacheID) {\n          fetching.awaitings.push({ cacheID, URL, callBack });\n          return;\n        }\n      }\n    }\n\n    if (cacheID || cacheID === 0) {\n      for (const cached of this._cachedTextures.caches) {\n        if (cached.cacheID !== cacheID) continue;\n        const textureObject = this.newTextureObject({\n          cacheID, linkedID: this.generateIncreamentID(), texture: cached.texture.texture, type: cached.texture.type, image: cached.texture.image\n        });\n        callBack(textureObject);\n        return;\n      }\n    }\n\n    this._cachedTextures.fetchingCaches.push({\n      cacheID,\n      awaitings: []\n    });\n    const callAwaitingCallBacks = (newCached, texture, err) => {\n      for (const fIndex in this._cachedTextures.fetchingCaches) {\n        const fetching = this._cachedTextures.fetchingCaches[fIndex];\n        if (fetching.cacheID !== cacheID) continue;\n        for (const cbObj of fetching.awaitings) {\n          if (err) {\n            cbObj.callBack(null, err);\n          } else {\n            const textureObject = this.newTextureObject({\n              cacheID, linkedID: this.generateIncreamentID(), texture: texture.texture, type: texture.type, image: texture.image\n            });\n            newCached.linkedIDs[textureObject.linkedID] = {};\n            cbObj.callBack(textureObject);\n          }\n        }\n        deleteIndex(this._cachedTextures.fetchingCaches, fIndex);\n        break;\n      }\n    };\n    const image = new Image();\n    image.onload = () => {\n      const texture = { type: \"image\", image, texture: createTexture(this.gl) };\n      if (cacheID || cacheID === 0) {\n        const newCached = {\n          cacheID,\n          linkedIDs: {},\n          texture\n        }\n        const textureObject = this.newTextureObject({\n          cacheID, linkedID: this.generateIncreamentID(), texture: texture.texture, type: texture.type, image: texture.image\n        });\n        newCached.linkedIDs[textureObject.linkedID] = {};\n        callBack(textureObject);\n        callAwaitingCallBacks(newCached, texture);\n        this._cachedTextures.caches.push(newCached);\n      } else {\n        const textureObject = this.newTextureObject({\n          texture: texture.texture, type: texture.type, image: texture.image\n        });\n        callBack(textureObject);\n      }\n    }\n    image.onerror = (err) => {\n      callBack(null, err);\n      callAwaitingCallBacks(null, null, err);\n    }\n    image.src = URL;\n  }\n  unlinkTextureCache(texture) {\n    if (!texture) return;\n    if (!texture.cacheID && texture.cacheID !== 0) return;\n    for (const index in this._cachedTextures.caches) {\n      const cached = this._cachedTextures.caches[index];\n      if (cached.cacheID !== texture.cacheID) continue;\n      if (!cached.linkedIDs.hasOwnProperty(texture.linkedID)) return;\n      delete cached.linkedIDs[texture.linkedID];\n      if (Object.keys(cached.linkedIDs).length) return;\n      //Remove the texture cache if not linked by others anymore.\n      deleteIndex(this._cachedTextures.caches, index);\n      break;\n    }\n\n  }\n  newTextureObject({\n    cacheID, linkedID, texture, type, image\n  }) {\n    return new TextureObject({\n      cacheID, linkedID, texture, type, image\n    });\n  }\n  console() {\n    const debug = this.debug;\n    return {\n      throwError(err) {\n        throw new Error(err);\n      },\n      log(...args) {\n        if (debug) {\n          return console.log.apply(this, args);\n        }\n      },\n      warn(...args) {\n        if (debug) {\n          return console.warn.apply(this, args);\n        }\n      },\n      error(...args) {\n        if (debug) {\n          return console.error.apply(this, args);\n        }\n      },\n    }\n  }\n\n  static createImageShaderProgram(gl) {\n    // Vertex shader for drawing image:\n    const vertexShaderSource = `\n    attribute vec2 aVertexPosition;\n    attribute vec2 aUv;\n    varying vec2 vUv;\n    uniform vec4 uScale;\n\n    void main () {\n      vUv = aUv;\n      gl_Position = vec4(aVertexPosition, 0, 1) * uScale;\n    }\n  `;\n    // Fragment shader for drawing image:\n    const fragmentShaderSource = `\n    precision mediump float;\n    uniform sampler2D uSampler;\n    varying vec2 vUv;\n\n    uniform vec2 u_resolution;\n    uniform vec2 rect_u_location;\n    uniform vec2 rect_u_size;\n    uniform vec4 rect_u_borderRadius;\n    uniform vec4 rect_u_borderColor;\n    uniform float rect_u_borderWidth;\n    uniform float rect_u_borderSoftness;\n\n    void roundedRectBorderEntryPoint(out vec4 fragColor, in vec2 fragCoord, vec2 u_resolution, vec2 u_location, vec2 u_rectSize, float u_borderWidth, vec4 u_colorRect, vec4 u_colorBorder, vec4 u_borderRadius, float u_borderSoftness);\n    void main () {\n      \n      vec4 imgColor = texture2D(uSampler, vUv);\n      vec2 fragCoord = gl_FragCoord.xy;\n\n      roundedRectBorderEntryPoint(gl_FragColor, fragCoord, u_resolution, rect_u_location, rect_u_size, rect_u_borderWidth, imgColor, rect_u_borderColor, rect_u_borderRadius, rect_u_borderSoftness);\n    }\n    ${RoundedRectBorderEntryPointSource}\n  `;\n    const vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n    const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n    const shaderProgram = createProgram(gl, vertexShader, fragmentShader);\n    return shaderProgram;\n  }\n  static createBorderShaderProgram(gl) {\n    // Vertex shader for drawing backgrounds/borders:\n    const vertexShaderSource = `\n      attribute vec2 rectVertexPosition;\n      varying vec2 rectVertexPositionVarying;\n      uniform vec4 uScale;\n      void main() {\n        rectVertexPositionVarying = rectVertexPosition; \n        gl_Position = vec4(rectVertexPosition, 0, 1) * uScale;\n      }\n    `;\n    // Fragment shader for drawing backgrounds/borders (solid color):\n    const fragmentShaderSource = `\n      precision mediump float;\n      uniform vec2 u_resolution;\n      uniform vec2 rect_u_location;\n      uniform vec2 rect_u_size;\n      uniform vec4 rect_u_borderRadius;\n      uniform vec4 rect_u_backgroundColor;\n      uniform vec4 rect_u_borderColor;\n      uniform float rect_u_borderWidth;\n      uniform float rect_u_borderSoftness;\n      varying vec2 rectVertexPositionVarying;\n      \n      void roundedRectBorderEntryPoint(out vec4 fragColor, in vec2 fragCoord, vec2 u_resolution, vec2 u_location, vec2 u_rectSize, float u_borderWidth, vec4 u_colorRect, vec4 u_colorBorder, vec4 u_borderRadius, float u_borderSoftness);\n      void main() {\n        vec2 fragCoord = gl_FragCoord.xy;\n        roundedRectBorderEntryPoint(gl_FragColor, fragCoord, u_resolution, rect_u_location, rect_u_size, rect_u_borderWidth, rect_u_backgroundColor, rect_u_borderColor, rect_u_borderRadius, rect_u_borderSoftness);\n      }\n      \n      ${RoundedRectBorderEntryPointSource}\n    `;\n    const vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n    const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n    const shaderProgram = createProgram(gl, vertexShader, fragmentShader);\n    return shaderProgram;\n  }\n\n  _compareObjectsProperties(obj1, obj2, matches) {\n    if (obj1 === obj2) return true;\n    if (!obj1 || !obj2) return false;\n    const doCompareObjectsProperties = (item1, item2, key1, key2, isRoot) => {\n      if (item1 === item2) return true;\n      if (!item1 || !item2) return false;\n\n      if (isRoot && (!vcVideosRendererCore.valIsObject(item1) || !vcVideosRendererCore.valIsObject(item2))) return false;\n\n      if (vcVideosRendererCore.valIsObject(item1) && vcVideosRendererCore.valIsObject(item2)) {\n        if (item1[key1] === item2[key2]) {\n          return true;\n        } else {\n          if (vcVideosRendererCore.valIsObject(item1[key1]) && vcVideosRendererCore.valIsObject(item2[key2])) {\n            return doCheckObjectsTree(item1[key1], item2[key2]);\n          } else\n            if (vcVideosRendererCore.valIsArray(item1[key1]) && vcVideosRendererCore.valIsArray(item2[key2])) {\n              return doCompareObjectsProperties(item1[key1], item2[key2], null, null);\n            } else {\n              return false;\n            }\n        }\n      } else if (vcVideosRendererCore.valIsArray(item1) && vcVideosRendererCore.valIsArray(item2)) {\n        if (item1.length !== item2.length) {\n          return false;\n        }\n        for (const i in item1) {\n          if (item1[i] === item2[i]) {\n            continue;\n          } else if (vcVideosRendererCore.valIsArray(item1[i]) && vcVideosRendererCore.valIsArray(item2[i])) {\n            if (!doCompareObjectsProperties(item1[i], item2[i], null, null)) return false;\n          } else if (vcVideosRendererCore.valIsObject(item1[i]) && vcVideosRendererCore.valIsObject(item2[i])) {\n            if (!doCheckObjectsTree(item1[i], item2[i])) return false;\n          } else {\n            return false;\n          }\n        }\n        return true;\n      } else if (item1 === item2) {\n        return true;\n      }\n      return false;\n    }\n    const doCheckObjectsTree = (item1, item2) => {\n      if (item1 === item2) return true;\n      if (!item1 || !item2) return false;\n      if (!vcVideosRendererCore.valIsObject(item1) || !vcVideosRendererCore.valIsObject(item2)) return false;\n      const keys = [...new Set([...Object.keys(item1), ...Object.keys(item2)])];\n\n      for (const key of keys) {\n        if (!doCompareObjectsProperties(item1, item2, key, key)) return false;\n      }\n      return true;\n    }\n\n    for (const match of matches) {\n      if (match.sameKeys) {\n        for (const key of match.sameKeys) {\n          if (!doCompareObjectsProperties(obj1, obj2, key, key, true)) {\n            return false;\n          }\n        }\n      } else if (match.key1 && match.key2) {\n        if (!doCompareObjectsProperties(obj1, obj2, match.key1, match.key2, true)) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n  static valIsObject(val) {\n    if (val && val instanceof Object && val.constructor.name === \"Object\") return true;\n    return false;\n  }\n  static valIsArray(val) {\n    if (val && Array.isArray(val)) return true;\n    return false;\n  }\n  _destroy() {\n    this._resetFrame([]);\n    this._stopDrawing();\n    if (this.MediaAudio) {\n      this.MediaAudio.audioContext.close();\n    }\n    this.destroyed = true;\n    this.Event.fire('destroy');\n  }\n}\nclass TextureObject {\n  constructor({\n    cacheID, linkedID, texture, type, image\n  }) {\n    this.cacheID = cacheID;\n    this.linkedID = linkedID;\n    this.texture = texture;\n    this.type = type;\n    this.image = image;\n  }\n}\n\n//_extensions hold vcVideosRenderer extensions,\n//and notto be set or get directly from _extensions, \n//except by Extension and GetExtension.\nvcVideosRendererCore.prototype._extensions = {}\nvcVideosRendererCore.prototype.GetExtension = function (extensionName) {\n  const extension = vcVideosRendererCore.prototype._extensions[extensionName];\n  if (!extension) {\n    throw new VCVRDError(`No extension with name \"${extensionName}\" found!`, { code: no_such_extension_found });\n  }\n  const self = this;\n  return {\n    New: function () {\n      return extension.call(self, [...arguments])\n    }\n  };\n}\n\nvcVideosRendererCore.prototype.Logs = {\n  VCVRDEnum: VCVRDEnum,\n  VCVRDError: VCVRDError\n}\nexport default vcVideosRendererCore;","export default __webpack_public_path__ + \"asset/vc-videos-renderer/images/default-avatar.png\";","export default __webpack_public_path__ + \"asset/vc-videos-renderer/images/default-reconnecting-avatar.png\";","export default __webpack_public_path__ + \"asset/vc-videos-renderer/images/muted-mic.png\";","export default \"// Source from -> https://www.shadertoy.com/view/fsdyzB\\r\\n        // Based on shaders from @amine_sebastian and @iq:\\r\\n        //   - https://www.shadertoy.com/view/WtdSDs\\r\\n        //   - https://www.shadertoy.com/view/tltXDl\\r\\n\\r\\n        // TODO: Shadow 'u_colorShadow.a' is unused; Only used 'u_colorShadow.rgb' components\\r\\n\\r\\n        // from https://iquilezles.org/articles/distfunctions\\r\\n\\r\\n        float roundedBoxSDF(vec2 CenterPosition, vec2 Size, vec4 Radius){\\r\\n          Radius.xy = (CenterPosition.x > 0.0) ? Radius.xy : Radius.zw;\\r\\n          Radius.x  = (CenterPosition.y > 0.0) ? Radius.x  : Radius.y;\\r\\n          vec2 q = abs(CenterPosition)-Size+Radius.x;\\r\\n    return min(max(q.x,q.y),0.0) + length(max(q,0.0)) - Radius.x;\\r\\n}\\r\\n\\r\\nvoid roundedRectBorderEntryPoint(out vec4 fragColor, in vec2 fragCoord, vec2 u_resolution, vec2 u_location, vec2 u_rectSize, float u_borderWidth, vec4 u_colorRect, vec4 u_colorBorder, vec4 u_borderRadius, float u_borderSoftness)\\r\\n{\\r\\n    // =========================================================================\\r\\n    // Inputs (uniforms)\\r\\n\\r\\n    vec2 uv = fragCoord.xy / u_resolution;\\r\\n    \\r\\n    float u_edgeSoftness   = 2.0; // How soft the edges should be (in pixels). Higher values could be used to simulate a drop shadow.\\r\\n    \\r\\n    // Border\\r\\n    vec4  u_cornerRadiuses = u_borderRadius; // The radiuses of the corners(in pixels): [topRight, bottomRight, topLeft, bottomLeft]\\r\\n    \\r\\n    \\r\\n    //float u_borderWidth = 5.0; // The border size (in pixels) \\r\\n    //float u_borderSoftness  = 1.0; // How soft the (internal) border should be (in pixels)\\r\\n    \\r\\n    float boundaryAdjustment = u_borderSoftness;\\r\\n    //vec2 u_resolution = vec2(620.0, 500.0); // viewport resolution (in pixels)\\r\\n    u_location = vec2(u_location.x + (boundaryAdjustment / 2.0), u_location.y + (boundaryAdjustment / 2.0)); // rect position (in pixels).\\r\\n    u_rectSize  = vec2(u_rectSize.x - boundaryAdjustment, u_rectSize.y - boundaryAdjustment); // The pixel-space scale of the rectangle.\\r\\n\\r\\n    \\r\\n    vec2 location = vec2(u_location.x, u_resolution.y - u_rectSize.y - u_location.y);\\r\\n    \\r\\n    \\r\\n    \\r\\n    // Shadow\\r\\n    float u_shadowSoftness = 0.0;            // The (half) shadow radius (in pixels)\\r\\n    //We don't need shadow, we should just hide it instead.\\r\\n    vec2  u_shadowOffset   = vec2(0.0, u_resolution.x-10.0); // The pixel-space shadow offset from rectangle center\\r\\n    \\r\\n    // Colors\\r\\n    vec4  u_colorBg     = vec4(u_colorRect.rgb, 0.0); // The color of background\\r\\n    //vec4  u_colorRect   = vec4(1.0,  0.30, 0.45, 0.3); // The color of rectangle\\r\\n    //vec4  u_colorBorder = vec4(0.7,  0.25, 0.55, 1.0); // The color of (internal) border\\r\\n    vec4  u_colorShadow = vec4(0.0,  0.0,  0.0,  1.0); // The color of shadow\\r\\n    \\r\\n    // =========================================================================\\r\\n\\r\\n    vec2 halfSize = (u_rectSize / 2.0); // Rectangle extents (half of the size)\\r\\n    \\r\\n    vec4 radius = u_cornerRadiuses; // Animated corners radiuses\\r\\n    \\r\\n    // -------------------------------------------------------------------------\\r\\n    \\r\\n    // Calculate distance to edge.   \\r\\n    float distance = roundedBoxSDF(fragCoord.xy - location - (u_rectSize/2.0), halfSize, radius);\\r\\n       \\r\\n    // Smooth the result (free antialiasing).\\r\\n    float smoothedAlpha = 1.0-smoothstep(0.0, u_edgeSoftness, distance);\\r\\n    \\r\\n    // -------------------------------------------------------------------------\\r\\n    // Border.\\r\\n    \\r\\n    float borderAlpha   = 1.0-smoothstep(u_borderWidth - u_borderSoftness, u_borderWidth, abs(distance));\\r\\n    \\r\\n    // -------------------------------------------------------------------------\\r\\n    // Apply a drop shadow effect.\\r\\n    \\r\\n    float shadowDistance  = roundedBoxSDF(fragCoord.xy - location + u_shadowOffset - (u_rectSize/2.0), halfSize, radius);\\r\\n    float shadowAlpha \\t  = 1.0-smoothstep(-u_shadowSoftness, u_shadowSoftness, shadowDistance);\\r\\n    \\r\\n\\r\\n    // -------------------------------------------------------------------------\\r\\n    // Debug output\\r\\n    \\r\\n        // vec4 debug_sdf = vec4(distance, 0.0, 0.0, 1.0);\\r\\n    \\r\\n        // Notice, that instead simple 'alpha' here is used 'min(u_colorRect.a, alpha)' to enable transparency\\r\\n        // vec4 debug_rect_color   = mix(u_colorBg, u_colorRect, min(u_colorRect.a, smoothedAlpha));\\r\\n    \\r\\n        // Notice, that instead simple 'alpha' here is used 'min(u_colorBorder.a, alpha)' to enable transparency\\r\\n        // vec4 debug_border_color = mix(u_colorBg, u_colorBorder, min(u_colorBorder.a, min(borderAlpha, smoothedAlpha)) ); \\r\\n\\r\\n    // -------------------------------------------------------------------------\\r\\n    // Apply colors layer-by-layer: background <- shadow <- rect <- border.\\r\\n    \\r\\n    // Blend background with shadow\\r\\n    vec4 res_shadow_color = mix(u_colorBg, vec4(u_colorShadow.rgb, shadowAlpha), shadowAlpha);\\r\\n\\r\\n    // Blend (background+shadow) with rect\\r\\n    //   Note:\\r\\n    //     - Used 'min(u_colorRect.a, smoothedAlpha)' instead of 'smoothedAlpha'\\r\\n    //       to enable rectangle color transparency\\r\\n    vec4 res_shadow_with_rect_color = \\r\\n        mix(\\r\\n            res_shadow_color,\\r\\n            u_colorRect,\\r\\n            min(u_colorRect.a, smoothedAlpha)\\r\\n        );\\r\\n        \\r\\n    // Blend (background+shadow+rect) with border\\r\\n    //   Note:\\r\\n    //     - Used 'min(borderAlpha, smoothedAlpha)' instead of 'borderAlpha'\\r\\n    //       to make border 'internal'\\r\\n    //     - Used 'min(u_colorBorder.a, alpha)' instead of 'alpha' to enable\\r\\n    //       border color transparency\\r\\n    vec4 res_shadow_with_rect_with_border =\\r\\n        mix(\\r\\n            res_shadow_with_rect_color,\\r\\n            u_colorBorder,\\r\\n            min(u_colorBorder.a, min(borderAlpha, smoothedAlpha))\\r\\n        );\\r\\n    \\r\\n    // -------------------------------------------------------------------------\\r\\n     \\r\\n    fragColor = res_shadow_with_rect_with_border.rgba;\\r\\n}\\r\\n      \";","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\n  defineProperty(\n    GeneratorFunctionPrototype,\n    \"constructor\",\n    { value: GeneratorFunction, configurable: true }\n  );\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    defineProperty(this, \"_invoke\", { value: enqueue });\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per GeneratorResume behavior specified since ES2015:\n        // ES2015 spec, step 3: https://262.ecma-international.org/6.0/#sec-generatorresume\n        // Latest spec, step 2: https://tc39.es/ecma262/#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method;\n    var method = delegate.iterator[methodName];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method, or a missing .next method, always terminate the\n      // yield* loop.\n      context.delegate = null;\n\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\n      if (methodName === \"throw\" && delegate.iterator[\"return\"]) {\n        // If the delegate iterator has a return method, give it a\n        // chance to clean up.\n        context.method = \"return\";\n        context.arg = undefined;\n        maybeInvokeDelegate(delegate, context);\n\n        if (context.method === \"throw\") {\n          // If maybeInvokeDelegate(context) changed context.method from\n          // \"return\" to \"throw\", let that override the TypeError below.\n          return ContinueSentinel;\n        }\n      }\n      if (methodName !== \"return\") {\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a '\" + methodName + \"' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(val) {\n    var object = Object(val);\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable != null) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    throw new TypeError(typeof iterable + \" is not iterable\");\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_require__(\"./node_modules/regenerator-runtime/runtime.js\");\nvar __webpack_exports__ = __webpack_require__(\"./src/index.js\");\n"],"names":["root","factory","exports","module","define","amd","a","i","self","defaultOptions","debug","frameRate","VcVideosRenderer","VcVideosRendererCore","constructor","canvas","options","super","Object","assign","getMixedStream","this","_getMixedStream","stopDrawing","_stopDrawing","startDrawing","_startDrawing","resetFrame","frameItems","_resetFrame","updateExistingItems","_updateExistingItems","softUpdateVideoFrameItem","itemID","objectFit","renderVideo","renderAudio","cameraDisabled","audioDisabled","isWaiting","isReconnecting","backgroundColor","borderColor","innerBorderColor","_softUpdateVideoFrameItem","destroy","_destroy","ImageRenderer","Extension","app","NewImageFromTextures","textures","style","onReadyCb","Img","NewImageFromURLs","URLs","defaultStyle","x","y","borderRadius","borderWidth","borderSoftness","innerBorder","gif","isGif","imageRenderer","sourceType","sources","gifState","groups","texturesObj","toRenderID","_isReady","_onReadyCb","_setupTexture","_setupRendering","_loadTexturesFromURLs","then","catch","err","source","URL","console","error","urls_sources","Promise","resolve","reject","promises","gifIndex","Number","push","resolveEach","rejectEach","loadTextureAsset","cacheID","texture","length","all","resolves","r","rItem","id","hasOwnProperty","er","finalTextures","texItem","includes","type","image","generateIncreamentID","sort","b","isItReady","update","width","height","undefined","render","gifGroupName","gifSessionKey","gifRandomizeInitialization","texturesLength","groupState","startTime","window","performance","now","nextRenderIndex","generateRandomInt","elapsedTime","timePerFrame","framesToAdvance","Math","floor","_render","textureIndex","textureItem","drawRectBackgroundsAndBorders","imageTexture","gl","useProgram","shaders","kinds","program","bindTexture","TEXTURE_2D","pixelStorei","UNPACK_FLIP_Y_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","positionBuffer","createBuffer","calculateVerticesPosition","imageWidth","imageHeight","ARRAY_BUFFER","setBufferData","attributes","rectVertexPosition","uniform2fv","uniforms","u_resolution","newLeft","newTop","newWidth","newHeight","newBorderRadius","borderSoftnessBoundary","uEdgeSoftnessNoise","rect_u_size","rect_u_location","uniform1f","rect_u_borderWidth","rect_u_borderSoftness","uniform4fv","rect_u_borderColor","rect_u_borderRadius","drawArrays","TRIANGLE_STRIP","parentBorderWidth","unlinkCache","textureObj","unlinkTextureCache","min","max","random","defaultTextStyle","hyphenateWord","compactText","fontSize","lineHeight","fontWeight","textColor","padding","xDirection","yDirection","icon","iconURL","iconCacheID","placeIcon","fromTextToIconPadding","floatingText","float","speed","Text","textRenderer","text","textStyle","willUpdateStyleAfterGettingSizeCb","TheImageRenderer","iconTexture","floatableItems","nonFloatableTextProp","_createTextTexture","_createText","iconImage","context","document","createElement","getContext","frame","items","maxLine","applyCanvasTextWriteAtrritubes","ctx","fillStyle","normalizeRGB_RGBA_Array_To_255_String","font","textAlign","textBaseline","textMaxWidth","maxWidth","calculatedText","calculateTextViewInCanvas","highest_line_width","highest_line_height","textWriteStartX","textWriteStartY","placeIconX","placeIconY","heightToUse","applyCanvasBackgroundAtrritubes","beginPath","roundRect","fill","drawImage","lineItem","lines","shift","firstItem","subCtx","fillText","line","_loadURLsFromCanvases","url_sources","newAxisX","newAxisY","canvasToStringUrl","imgUrl","item","_updateNonFloatableTextXY","_state","total_width","moving_x","speedMoveStep","appFrameRate","state","timePerSpeed","nextMovingX","widthPos","lastTestNextMovingX","testNextMovingX","toDataURL","e","initialY","noMoreBreakAll","ellipseNextLine","itStillHaveMoreBeforeEllipsed","lineCountsNow","keepLineForFinalEllipse","pasteCalculatedLine","isUserNewLine","isCalledFromFinal","trimEnd","trimStart","metrics","measureText","isWordBreakAtEnd","mLineHeight","actualBoundingBoxAscent","actualBoundingBoxDescent","abs","chars","split","wordsStr","words","word","testLine","measureTestLine","testWidth","jumpToMainWrite","testHyphenatedLine","testWidth2","testHyphenatedLineMeasureSuffix","unshift","wordChars","hyphenateLongWord","hyphenateLongWordAddedCounts","wordChar","lastCharIsAlphabet","charIsAlphabet","charsContainAlphabet","continuousWordSuffix","join","toWrite","str","match","rgb","TextRenderer","NewText","TARGET","EventHandle","event","params","evt","createEvent","bubbles","cancelable","detail","initCustomEvent","prototype","Event","_EventHandlePolyfill","EventHandler","appID","eventPrefix","on","eventName","callback","addEventListener","forEach","remove","removeEventListener","once","off","Fn","fire","dispatchEvent","_dispatchEvent","extensionsBased","mergeExtension","name","extension","args","Error","addExtension","_extensions","unsupported","code","message","unsupported_webgl","drawing_already_progress","no_such_extension_found","vcVideosRenderer_already_destroyed","VCVRDError","_vCVRDError_params","vCVRDErrorCode","NewErrorFromEnumItem","vcVrdEnumItem","CaptureMediaStreamFromMediaElement","MediaStream","mediaElement","takeKindsOnly","_vcvrdr_CMSFME_WeakMaps","video","WeakMap","audio","Array","isArray","putTrackToOutput","track","kind","addTrack","captureStream","getTracks","MediaVideo","get","canvasCtx","references","destroyed","isDrawing","_unlinkRef","MediaStreamTrackVideo","GetClonedVideoTrack","AnimationFrameRunner","CustomAnimationFrameRunner","ref","_canplay","_do_render","_pauseDrawing","getVideoTracks","videoWidth","videoHeight","start","stop","paused","readyState","delete","set","refID","index","getClonedVideoTrack","_CMSFME_vidmst_increment_id","clonedVideoMediaStreamTrack","clone","clonedVideoTrack","MediaAudio","audioContext","AudioContext","audioGain","sourceNode","destination","MediaStreamTrackAudio","processedAudioElement","createMediaStreamDestination","createGain","connect","createMediaElementSource","resume","audioTracks","stream","getAudioTracks","Audio","srcObject","play","clonedAudioTrack","array","splice","calculateWidthFromRatio","ratio","borderSizes","numerator","denominator","map","calculateHeightFromRatio","deleteIndex","fps","postMessage","workerScriptStr","workerScriptHolder","_animating","_aniInterval","_lastRenderTime","onmessage","data","_StartRunner","currentTime","requestAnimationFrame","toString","substring","indexOf","lastIndexOf","workerScriptBlob","createObjectURL","Blob","Worker","createShader","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","log","getShaderInfoLog","createProgram","vertexShader","fragmentShader","attachShader","linkProgram","buffer","bindBuffer","bufferData","STATIC_DRAW","location","vertexAttribPointer","FLOAT","enableVertexAttribArray","createTexture","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","createRectVertices","left","right","top","bottom","canvasWidth","devicePixelRatio","canvasHeight","leftNorm","rightNorm","topNorm","bottomNorm","Float32Array","_vcVrd__gid","vcVideosRendererCore","extState","session","itemsToMergerList","audioItemsToMergerList","_cachedTextures","fetchingCaches","caches","waiting_animation_ImageRenderer","_initDefaultEvent","_initWebGL","waitingAnimationsTextures","frameUrl","Env","updateItemsOnly","oldItemsToMergerListAsMap","old_mItem","itemProp","newItemsToMergerList","mItem","videoElement","displayName","isVideoReady","reconnectingAvatarURL","defaultReconnectingAvatarURL","avatarURL","defaultAvatarURL","_mitem_state","Reconnecting_ImageRenderer","DisplayName_TextRenderer","videoTexture","_addEventToVideo","isSameDimension","isSamePosition","isSameBorderRadius","_removeEventFromVideo","_compareObjectsProperties","key1","key2","waitingDimension","sessionKey","calcDimensions","avatarSize","avatarBorderRadius","Avatar_ImageRenderer","avatarDim","DisplayName_WithMutedMic_TextRenderer","mutedMicImageURL","_initVideoReconnecting","isNewUpdate","old_mergeItem","TextItemRenderer","isSameAsOld","sameKeys","warn","newItems","newItem","oldItem","_resetAudioTracks","k","_VideoCanplayEventCb","hasVideoTrack","foundTheItemIn","canUpdateAudio","mergeItem","VCVRDEnum","_initMediaAudio","list","oldAudioItemsToMergerListAsMap","newaudioItemsToMergerList","capturedStream","sourceProp","MixedAudioMediaStreamGainNode","MixedAudioMediaStreamSourceNode","itemNewMediaStream","fromMediaStream","mixedAudioMediaStream","oldTrack","foundAudioTrackIn","newTrack","removeTrack","hasAudioTrack","_disconnectAudio","filter","t","createMediaStreamSource","gain","value","mixerGain","disconnect","alpha","GetExtension","New","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","imageShaderProgram","createImageShaderProgram","dprX","dprY","viewport","img_positionVertices","img_uvVertices","img_aVertexPositionLocation","getAttribLocation","img_aUvLocation","img_positionBuffer","img_uvBuffer","img_uSamplerLocation","getUniformLocation","uniform1i","img_uScaleLocation","img_u_resolutionLocation","img_rect_u_sizeLocation","img_rect_u_borderWidthLocation","img_rect_u_borderSoftnessLocation","img_rect_u_borderRadiusLocation","img_rect_u_borderColorLocation","img_rect_u_locationLocation","borderProgram","createBorderShaderProgram","border_rect_uScaleLocation","border_rect_rectVertexPositionLocation","border_u_resolutionLocation","border_rect_u_sizeLocation","border_rect_u_borderWidthLocation","border_rect_u_borderSoftnessLocation","border_rect_u_borderRadiusLocation","border_rect_u_backgroundColorLocation","border_rect_u_borderColorLocation","border_rect_u_locationLocation","rect_u_backgroundColor","clearColor","clear","COLOR_BUFFER_BIT","_drawVideoBackgroundsAndBorders","RGB","videoInfo","isInner","rectVertices","rectBuffer","border","callBack","fetching","awaitings","cached","textureObject","newTextureObject","linkedID","callAwaitingCallBacks","newCached","fIndex","cbObj","linkedIDs","Image","onload","onerror","src","keys","TextureObject","throwError","apply","fragmentShaderSource","RoundedRectBorderEntryPointSource","VERTEX_SHADER","FRAGMENT_SHADER","obj1","obj2","matches","doCompareObjectsProperties","item1","item2","isRoot","valIsObject","doCheckObjectsTree","valIsArray","Set","key","val","close","extensionName","call","arguments","Logs","runtime","Op","hasOwn","defineProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","enumerable","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","Context","makeInvokeMethod","tryCatch","fn","arg","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","record","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","done","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","object","reverse","pop","skipTempReset","prev","charAt","slice","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","o","prop","p"],"sourceRoot":""}